
/* DO NOT EDIT.
 *
 * This file is autogenerated by
 * "gentypes.py libxl_types.idl __libxl_types.h __libxl_types_json.h __libxl_types.c"
 */

#include "libxl_osdeps.h"

#include <stdint.h>
#include <stdlib.h>
#include <string.h>

#include "libxl_internal.h"

#define LIBXL_DTOR_POISON 0xa5

void libxl_ioport_range_dispose(libxl_ioport_range *p)
{
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_iomem_range_dispose(libxl_iomem_range *p)
{
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_vga_interface_info_dispose(libxl_vga_interface_info *p)
{
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_vnc_info_dispose(libxl_vnc_info *p)
{
    free(p->listen);
    free(p->passwd);
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_spice_info_dispose(libxl_spice_info *p)
{
    free(p->host);
    free(p->passwd);
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_sdl_info_dispose(libxl_sdl_info *p)
{
    free(p->display);
    free(p->xauthority);
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_dominfo_dispose(libxl_dominfo *p)
{
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_cpupoolinfo_dispose(libxl_cpupoolinfo *p)
{
    libxl_bitmap_dispose(&p->cpumap);
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_vminfo_dispose(libxl_vminfo *p)
{
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_version_info_dispose(libxl_version_info *p)
{
    free(p->xen_version_extra);
    free(p->compiler);
    free(p->compile_by);
    free(p->compile_domain);
    free(p->compile_date);
    free(p->capabilities);
    free(p->changeset);
    free(p->commandline);
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_domain_create_info_dispose(libxl_domain_create_info *p)
{
    free(p->name);
    libxl_key_value_list_dispose(&p->xsdata);
    libxl_key_value_list_dispose(&p->platformdata);
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_domain_restore_params_dispose(libxl_domain_restore_params *p)
{
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_domain_sched_params_dispose(libxl_domain_sched_params *p)
{
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_domain_build_info_dispose(libxl_domain_build_info *p)
{
    libxl_bitmap_dispose(&p->avail_vcpus);
    libxl_bitmap_dispose(&p->cpumap);
    libxl_bitmap_dispose(&p->nodemap);
    libxl_cpuid_dispose(&p->cpuid);
    free(p->blkdev_start);
    free(p->device_model);
    libxl_string_list_dispose(&p->extra);
    libxl_string_list_dispose(&p->extra_pv);
    libxl_string_list_dispose(&p->extra_hvm);
    libxl_domain_sched_params_dispose(&p->sched_params);
    {
        int i;
        for (i=0; i<p->num_ioports; i++)
            libxl_ioport_range_dispose(&p->ioports[i]);
        free(p->ioports);
    }
    free(p->irqs);
    {
        int i;
        for (i=0; i<p->num_iomem; i++)
            libxl_iomem_range_dispose(&p->iomem[i]);
        free(p->iomem);
    }
    switch (p->type) {
    case LIBXL_DOMAIN_TYPE_HVM:
        free(p->u.hvm.firmware);
        free(p->u.hvm.timeoffset);
        free(p->u.hvm.smbios_firmware);
        free(p->u.hvm.acpi_firmware);
        libxl_vga_interface_info_dispose(&p->u.hvm.vga);
        libxl_vnc_info_dispose(&p->u.hvm.vnc);
        free(p->u.hvm.keymap);
        libxl_sdl_info_dispose(&p->u.hvm.sdl);
        libxl_spice_info_dispose(&p->u.hvm.spice);
        free(p->u.hvm.serial);
        free(p->u.hvm.boot);
        free(p->u.hvm.usbdevice);
        free(p->u.hvm.soundhw);
        libxl_string_list_dispose(&p->u.hvm.usbdevice_list);
        break;
    case LIBXL_DOMAIN_TYPE_PV:
        free(p->u.pv.kernel);
        free(p->u.pv.bootloader);
        libxl_string_list_dispose(&p->u.pv.bootloader_args);
        free(p->u.pv.cmdline);
        free(p->u.pv.ramdisk);
        break;
    case LIBXL_DOMAIN_TYPE_INVALID:
        break;
    }
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_device_vfb_dispose(libxl_device_vfb *p)
{
    free(p->backend_domname);
    libxl_vnc_info_dispose(&p->vnc);
    libxl_sdl_info_dispose(&p->sdl);
    free(p->keymap);
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_device_vkb_dispose(libxl_device_vkb *p)
{
    free(p->backend_domname);
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_device_disk_dispose(libxl_device_disk *p)
{
    free(p->backend_domname);
    free(p->pdev_path);
    free(p->vdev);
    free(p->script);
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_device_nic_dispose(libxl_device_nic *p)
{
    free(p->backend_domname);
    free(p->model);
    free(p->ip);
    free(p->bridge);
    free(p->ifname);
    free(p->script);
    free(p->gatewaydev);
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_device_pci_dispose(libxl_device_pci *p)
{
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_device_vtpm_dispose(libxl_device_vtpm *p)
{
    free(p->backend_domname);
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_domain_config_dispose(libxl_domain_config *p)
{
    libxl_domain_create_info_dispose(&p->c_info);
    libxl_domain_build_info_dispose(&p->b_info);
    {
        int i;
        for (i=0; i<p->num_disks; i++)
            libxl_device_disk_dispose(&p->disks[i]);
        free(p->disks);
    }
    {
        int i;
        for (i=0; i<p->num_nics; i++)
            libxl_device_nic_dispose(&p->nics[i]);
        free(p->nics);
    }
    {
        int i;
        for (i=0; i<p->num_pcidevs; i++)
            libxl_device_pci_dispose(&p->pcidevs[i]);
        free(p->pcidevs);
    }
    {
        int i;
        for (i=0; i<p->num_vfbs; i++)
            libxl_device_vfb_dispose(&p->vfbs[i]);
        free(p->vfbs);
    }
    {
        int i;
        for (i=0; i<p->num_vkbs; i++)
            libxl_device_vkb_dispose(&p->vkbs[i]);
        free(p->vkbs);
    }
    {
        int i;
        for (i=0; i<p->num_vtpms; i++)
            libxl_device_vtpm_dispose(&p->vtpms[i]);
        free(p->vtpms);
    }
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_diskinfo_dispose(libxl_diskinfo *p)
{
    free(p->backend);
    free(p->frontend);
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_nicinfo_dispose(libxl_nicinfo *p)
{
    free(p->backend);
    free(p->frontend);
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_vtpminfo_dispose(libxl_vtpminfo *p)
{
    free(p->backend);
    free(p->frontend);
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_vcpuinfo_dispose(libxl_vcpuinfo *p)
{
    libxl_bitmap_dispose(&p->cpumap);
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_physinfo_dispose(libxl_physinfo *p)
{
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_numainfo_dispose(libxl_numainfo *p)
{
    free(p->dists);
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_cputopology_dispose(libxl_cputopology *p)
{
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_domain_remus_info_dispose(libxl_domain_remus_info *p)
{
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_event_dispose(libxl_event *p)
{
    switch (p->type) {
    case LIBXL_EVENT_TYPE_DOMAIN_SHUTDOWN:
        break;
    case LIBXL_EVENT_TYPE_DOMAIN_DEATH:
        break;
    case LIBXL_EVENT_TYPE_DISK_EJECT:
        free(p->u.disk_eject.vdev);
        libxl_device_disk_dispose(&p->u.disk_eject.disk);
        break;
    case LIBXL_EVENT_TYPE_OPERATION_COMPLETE:
        break;
    case LIBXL_EVENT_TYPE_DOMAIN_CREATE_CONSOLE_AVAILABLE:
        break;
    }
    memset(p, LIBXL_DTOR_POISON, sizeof(*p));
}

void libxl_ioport_range_init(libxl_ioport_range *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_iomem_range_init(libxl_iomem_range *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_vga_interface_info_init(libxl_vga_interface_info *p)
{
    memset(p, '\0', sizeof(*p));
    p->kind = 1;
}

void libxl_vnc_info_init(libxl_vnc_info *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_spice_info_init(libxl_spice_info *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_sdl_info_init(libxl_sdl_info *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_dominfo_init(libxl_dominfo *p)
{
    memset(p, '\0', sizeof(*p));
    p->shutdown_reason = LIBXL_SHUTDOWN_REASON_UNKNOWN;
    p->outstanding_memkb = LIBXL_MEMKB_DEFAULT;
    p->current_memkb = LIBXL_MEMKB_DEFAULT;
    p->shared_memkb = LIBXL_MEMKB_DEFAULT;
    p->paged_memkb = LIBXL_MEMKB_DEFAULT;
    p->max_memkb = LIBXL_MEMKB_DEFAULT;
    p->domain_type = -1;
}

void libxl_cpupoolinfo_init(libxl_cpupoolinfo *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_vminfo_init(libxl_vminfo *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_version_info_init(libxl_version_info *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_domain_create_info_init(libxl_domain_create_info *p)
{
    memset(p, '\0', sizeof(*p));
    p->type = -1;
}

void libxl_domain_restore_params_init(libxl_domain_restore_params *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_domain_sched_params_init(libxl_domain_sched_params *p)
{
    memset(p, '\0', sizeof(*p));
    p->weight = LIBXL_DOMAIN_SCHED_PARAM_WEIGHT_DEFAULT;
    p->cap = LIBXL_DOMAIN_SCHED_PARAM_CAP_DEFAULT;
    p->period = LIBXL_DOMAIN_SCHED_PARAM_PERIOD_DEFAULT;
    p->slice = LIBXL_DOMAIN_SCHED_PARAM_SLICE_DEFAULT;
    p->latency = LIBXL_DOMAIN_SCHED_PARAM_LATENCY_DEFAULT;
    p->extratime = LIBXL_DOMAIN_SCHED_PARAM_EXTRATIME_DEFAULT;
}

void libxl_domain_build_info_init(libxl_domain_build_info *p)
{
    memset(p, '\0', sizeof(*p));
    p->max_memkb = LIBXL_MEMKB_DEFAULT;
    p->target_memkb = LIBXL_MEMKB_DEFAULT;
    p->video_memkb = LIBXL_MEMKB_DEFAULT;
    p->shadow_memkb = LIBXL_MEMKB_DEFAULT;
    libxl_domain_sched_params_init(&p->sched_params);
    p->type = LIBXL_DOMAIN_TYPE_INVALID;
}

void libxl_domain_build_info_init_type(libxl_domain_build_info *p, libxl_domain_type type)
{
    assert(p->type == LIBXL_DOMAIN_TYPE_INVALID);
    p->type = type;
    switch (p->type) {
    case LIBXL_DOMAIN_TYPE_HVM:
        p->u.hvm.timer_mode = LIBXL_TIMER_MODE_DEFAULT;
        libxl_vga_interface_info_init(&p->u.hvm.vga);
        libxl_vnc_info_init(&p->u.hvm.vnc);
        libxl_sdl_info_init(&p->u.hvm.sdl);
        libxl_spice_info_init(&p->u.hvm.spice);
        break;
    case LIBXL_DOMAIN_TYPE_PV:
        p->u.pv.slack_memkb = LIBXL_MEMKB_DEFAULT;
        break;
    case LIBXL_DOMAIN_TYPE_INVALID:
        break;
    }
}

void libxl_device_vfb_init(libxl_device_vfb *p)
{
    memset(p, '\0', sizeof(*p));
    p->devid = -1;
    libxl_vnc_info_init(&p->vnc);
    libxl_sdl_info_init(&p->sdl);
}

void libxl_device_vkb_init(libxl_device_vkb *p)
{
    memset(p, '\0', sizeof(*p));
    p->devid = -1;
}

void libxl_device_disk_init(libxl_device_disk *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_device_nic_init(libxl_device_nic *p)
{
    memset(p, '\0', sizeof(*p));
    p->devid = -1;
}

void libxl_device_pci_init(libxl_device_pci *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_device_vtpm_init(libxl_device_vtpm *p)
{
    memset(p, '\0', sizeof(*p));
    p->devid = -1;
}

void libxl_domain_config_init(libxl_domain_config *p)
{
    memset(p, '\0', sizeof(*p));
    libxl_domain_create_info_init(&p->c_info);
    libxl_domain_build_info_init(&p->b_info);
    p->on_poweroff = 1;
    p->on_reboot = 1;
    p->on_watchdog = 1;
    p->on_crash = 1;
}

void libxl_diskinfo_init(libxl_diskinfo *p)
{
    memset(p, '\0', sizeof(*p));
    p->devid = -1;
}

void libxl_nicinfo_init(libxl_nicinfo *p)
{
    memset(p, '\0', sizeof(*p));
    p->devid = -1;
}

void libxl_vtpminfo_init(libxl_vtpminfo *p)
{
    memset(p, '\0', sizeof(*p));
    p->devid = -1;
}

void libxl_vcpuinfo_init(libxl_vcpuinfo *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_physinfo_init(libxl_physinfo *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_numainfo_init(libxl_numainfo *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_cputopology_init(libxl_cputopology *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_sched_credit_params_init(libxl_sched_credit_params *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_domain_remus_info_init(libxl_domain_remus_info *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_event_init(libxl_event *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_event_init_type(libxl_event *p, libxl_event_type type)
{
    assert(!p->type);
    p->type = type;
    switch (p->type) {
    case LIBXL_EVENT_TYPE_DOMAIN_SHUTDOWN:
        break;
    case LIBXL_EVENT_TYPE_DOMAIN_DEATH:
        break;
    case LIBXL_EVENT_TYPE_DISK_EJECT:
        libxl_device_disk_init(&p->u.disk_eject.disk);
        break;
    case LIBXL_EVENT_TYPE_OPERATION_COMPLETE:
        break;
    case LIBXL_EVENT_TYPE_DOMAIN_CREATE_CONSOLE_AVAILABLE:
        break;
    }
}

const char *libxl_error_to_string(libxl_error e)
{
    switch(e) {
        case ERROR_NONSPECIFIC:
            return "nonspecific";
        case ERROR_VERSION:
            return "version";
        case ERROR_FAIL:
            return "fail";
        case ERROR_NI:
            return "ni";
        case ERROR_NOMEM:
            return "nomem";
        case ERROR_INVAL:
            return "inval";
        case ERROR_BADFAIL:
            return "badfail";
        case ERROR_GUEST_TIMEDOUT:
            return "guest_timedout";
        case ERROR_TIMEDOUT:
            return "timedout";
        case ERROR_NOPARAVIRT:
            return "noparavirt";
        case ERROR_NOT_READY:
            return "not_ready";
        case ERROR_OSEVENT_REG_FAIL:
            return "osevent_reg_fail";
        case ERROR_BUFFERFULL:
            return "bufferfull";
        case ERROR_UNKNOWN_CHILD:
            return "unknown_child";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_error_string_table[] = {
    { .s = "nonspecific", .v = ERROR_NONSPECIFIC },
    { .s = "version", .v = ERROR_VERSION },
    { .s = "fail", .v = ERROR_FAIL },
    { .s = "ni", .v = ERROR_NI },
    { .s = "nomem", .v = ERROR_NOMEM },
    { .s = "inval", .v = ERROR_INVAL },
    { .s = "badfail", .v = ERROR_BADFAIL },
    { .s = "guest_timedout", .v = ERROR_GUEST_TIMEDOUT },
    { .s = "timedout", .v = ERROR_TIMEDOUT },
    { .s = "noparavirt", .v = ERROR_NOPARAVIRT },
    { .s = "not_ready", .v = ERROR_NOT_READY },
    { .s = "osevent_reg_fail", .v = ERROR_OSEVENT_REG_FAIL },
    { .s = "bufferfull", .v = ERROR_BUFFERFULL },
    { .s = "unknown_child", .v = ERROR_UNKNOWN_CHILD },
    { NULL, -1 },
};

int libxl_error_from_string(const char *s, libxl_error *e)
{
    return libxl__enum_from_string(libxl_error_string_table,
                                   s, (int *)e);
}

const char *libxl_domain_type_to_string(libxl_domain_type e)
{
    switch(e) {
        case LIBXL_DOMAIN_TYPE_INVALID:
            return "invalid";
        case LIBXL_DOMAIN_TYPE_HVM:
            return "hvm";
        case LIBXL_DOMAIN_TYPE_PV:
            return "pv";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_domain_type_string_table[] = {
    { .s = "invalid", .v = LIBXL_DOMAIN_TYPE_INVALID },
    { .s = "hvm", .v = LIBXL_DOMAIN_TYPE_HVM },
    { .s = "pv", .v = LIBXL_DOMAIN_TYPE_PV },
    { NULL, -1 },
};

int libxl_domain_type_from_string(const char *s, libxl_domain_type *e)
{
    return libxl__enum_from_string(libxl_domain_type_string_table,
                                   s, (int *)e);
}

const char *libxl_device_model_version_to_string(libxl_device_model_version e)
{
    switch(e) {
        case LIBXL_DEVICE_MODEL_VERSION_UNKNOWN:
            return "unknown";
        case LIBXL_DEVICE_MODEL_VERSION_QEMU_XEN_TRADITIONAL:
            return "qemu_xen_traditional";
        case LIBXL_DEVICE_MODEL_VERSION_QEMU_XEN:
            return "qemu_xen";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_device_model_version_string_table[] = {
    { .s = "unknown", .v = LIBXL_DEVICE_MODEL_VERSION_UNKNOWN },
    { .s = "qemu_xen_traditional", .v = LIBXL_DEVICE_MODEL_VERSION_QEMU_XEN_TRADITIONAL },
    { .s = "qemu_xen", .v = LIBXL_DEVICE_MODEL_VERSION_QEMU_XEN },
    { NULL, -1 },
};

int libxl_device_model_version_from_string(const char *s, libxl_device_model_version *e)
{
    return libxl__enum_from_string(libxl_device_model_version_string_table,
                                   s, (int *)e);
}

const char *libxl_console_type_to_string(libxl_console_type e)
{
    switch(e) {
        case LIBXL_CONSOLE_TYPE_UNKNOWN:
            return "unknown";
        case LIBXL_CONSOLE_TYPE_SERIAL:
            return "serial";
        case LIBXL_CONSOLE_TYPE_PV:
            return "pv";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_console_type_string_table[] = {
    { .s = "unknown", .v = LIBXL_CONSOLE_TYPE_UNKNOWN },
    { .s = "serial", .v = LIBXL_CONSOLE_TYPE_SERIAL },
    { .s = "pv", .v = LIBXL_CONSOLE_TYPE_PV },
    { NULL, -1 },
};

int libxl_console_type_from_string(const char *s, libxl_console_type *e)
{
    return libxl__enum_from_string(libxl_console_type_string_table,
                                   s, (int *)e);
}

const char *libxl_disk_format_to_string(libxl_disk_format e)
{
    switch(e) {
        case LIBXL_DISK_FORMAT_UNKNOWN:
            return "unknown";
        case LIBXL_DISK_FORMAT_QCOW:
            return "qcow";
        case LIBXL_DISK_FORMAT_QCOW2:
            return "qcow2";
        case LIBXL_DISK_FORMAT_VHD:
            return "vhd";
        case LIBXL_DISK_FORMAT_RAW:
            return "raw";
        case LIBXL_DISK_FORMAT_EMPTY:
            return "empty";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_disk_format_string_table[] = {
    { .s = "unknown", .v = LIBXL_DISK_FORMAT_UNKNOWN },
    { .s = "qcow", .v = LIBXL_DISK_FORMAT_QCOW },
    { .s = "qcow2", .v = LIBXL_DISK_FORMAT_QCOW2 },
    { .s = "vhd", .v = LIBXL_DISK_FORMAT_VHD },
    { .s = "raw", .v = LIBXL_DISK_FORMAT_RAW },
    { .s = "empty", .v = LIBXL_DISK_FORMAT_EMPTY },
    { NULL, -1 },
};

int libxl_disk_format_from_string(const char *s, libxl_disk_format *e)
{
    return libxl__enum_from_string(libxl_disk_format_string_table,
                                   s, (int *)e);
}

const char *libxl_disk_backend_to_string(libxl_disk_backend e)
{
    switch(e) {
        case LIBXL_DISK_BACKEND_UNKNOWN:
            return "unknown";
        case LIBXL_DISK_BACKEND_PHY:
            return "phy";
        case LIBXL_DISK_BACKEND_TAP:
            return "tap";
        case LIBXL_DISK_BACKEND_QDISK:
            return "qdisk";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_disk_backend_string_table[] = {
    { .s = "unknown", .v = LIBXL_DISK_BACKEND_UNKNOWN },
    { .s = "phy", .v = LIBXL_DISK_BACKEND_PHY },
    { .s = "tap", .v = LIBXL_DISK_BACKEND_TAP },
    { .s = "qdisk", .v = LIBXL_DISK_BACKEND_QDISK },
    { NULL, -1 },
};

int libxl_disk_backend_from_string(const char *s, libxl_disk_backend *e)
{
    return libxl__enum_from_string(libxl_disk_backend_string_table,
                                   s, (int *)e);
}

const char *libxl_nic_type_to_string(libxl_nic_type e)
{
    switch(e) {
        case LIBXL_NIC_TYPE_UNKNOWN:
            return "unknown";
        case LIBXL_NIC_TYPE_VIF_IOEMU:
            return "vif_ioemu";
        case LIBXL_NIC_TYPE_VIF:
            return "vif";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_nic_type_string_table[] = {
    { .s = "unknown", .v = LIBXL_NIC_TYPE_UNKNOWN },
    { .s = "vif_ioemu", .v = LIBXL_NIC_TYPE_VIF_IOEMU },
    { .s = "vif", .v = LIBXL_NIC_TYPE_VIF },
    { NULL, -1 },
};

int libxl_nic_type_from_string(const char *s, libxl_nic_type *e)
{
    return libxl__enum_from_string(libxl_nic_type_string_table,
                                   s, (int *)e);
}

const char *libxl_action_on_shutdown_to_string(libxl_action_on_shutdown e)
{
    switch(e) {
        case LIBXL_ACTION_ON_SHUTDOWN_DESTROY:
            return "destroy";
        case LIBXL_ACTION_ON_SHUTDOWN_RESTART:
            return "restart";
        case LIBXL_ACTION_ON_SHUTDOWN_RESTART_RENAME:
            return "restart_rename";
        case LIBXL_ACTION_ON_SHUTDOWN_PRESERVE:
            return "preserve";
        case LIBXL_ACTION_ON_SHUTDOWN_COREDUMP_DESTROY:
            return "coredump_destroy";
        case LIBXL_ACTION_ON_SHUTDOWN_COREDUMP_RESTART:
            return "coredump_restart";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_action_on_shutdown_string_table[] = {
    { .s = "destroy", .v = LIBXL_ACTION_ON_SHUTDOWN_DESTROY },
    { .s = "restart", .v = LIBXL_ACTION_ON_SHUTDOWN_RESTART },
    { .s = "restart_rename", .v = LIBXL_ACTION_ON_SHUTDOWN_RESTART_RENAME },
    { .s = "preserve", .v = LIBXL_ACTION_ON_SHUTDOWN_PRESERVE },
    { .s = "coredump_destroy", .v = LIBXL_ACTION_ON_SHUTDOWN_COREDUMP_DESTROY },
    { .s = "coredump_restart", .v = LIBXL_ACTION_ON_SHUTDOWN_COREDUMP_RESTART },
    { NULL, -1 },
};

int libxl_action_on_shutdown_from_string(const char *s, libxl_action_on_shutdown *e)
{
    return libxl__enum_from_string(libxl_action_on_shutdown_string_table,
                                   s, (int *)e);
}

const char *libxl_trigger_to_string(libxl_trigger e)
{
    switch(e) {
        case LIBXL_TRIGGER_UNKNOWN:
            return "unknown";
        case LIBXL_TRIGGER_POWER:
            return "power";
        case LIBXL_TRIGGER_SLEEP:
            return "sleep";
        case LIBXL_TRIGGER_NMI:
            return "nmi";
        case LIBXL_TRIGGER_INIT:
            return "init";
        case LIBXL_TRIGGER_RESET:
            return "reset";
        case LIBXL_TRIGGER_S3RESUME:
            return "s3resume";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_trigger_string_table[] = {
    { .s = "unknown", .v = LIBXL_TRIGGER_UNKNOWN },
    { .s = "power", .v = LIBXL_TRIGGER_POWER },
    { .s = "sleep", .v = LIBXL_TRIGGER_SLEEP },
    { .s = "nmi", .v = LIBXL_TRIGGER_NMI },
    { .s = "init", .v = LIBXL_TRIGGER_INIT },
    { .s = "reset", .v = LIBXL_TRIGGER_RESET },
    { .s = "s3resume", .v = LIBXL_TRIGGER_S3RESUME },
    { NULL, -1 },
};

int libxl_trigger_from_string(const char *s, libxl_trigger *e)
{
    return libxl__enum_from_string(libxl_trigger_string_table,
                                   s, (int *)e);
}

const char *libxl_tsc_mode_to_string(libxl_tsc_mode e)
{
    switch(e) {
        case LIBXL_TSC_MODE_DEFAULT:
            return "default";
        case LIBXL_TSC_MODE_ALWAYS_EMULATE:
            return "always_emulate";
        case LIBXL_TSC_MODE_NATIVE:
            return "native";
        case LIBXL_TSC_MODE_NATIVE_PARAVIRT:
            return "native_paravirt";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_tsc_mode_string_table[] = {
    { .s = "default", .v = LIBXL_TSC_MODE_DEFAULT },
    { .s = "always_emulate", .v = LIBXL_TSC_MODE_ALWAYS_EMULATE },
    { .s = "native", .v = LIBXL_TSC_MODE_NATIVE },
    { .s = "native_paravirt", .v = LIBXL_TSC_MODE_NATIVE_PARAVIRT },
    { NULL, -1 },
};

int libxl_tsc_mode_from_string(const char *s, libxl_tsc_mode *e)
{
    return libxl__enum_from_string(libxl_tsc_mode_string_table,
                                   s, (int *)e);
}

const char *libxl_timer_mode_to_string(libxl_timer_mode e)
{
    switch(e) {
        case LIBXL_TIMER_MODE_UNKNOWN:
            return "unknown";
        case LIBXL_TIMER_MODE_DELAY_FOR_MISSED_TICKS:
            return "delay_for_missed_ticks";
        case LIBXL_TIMER_MODE_NO_DELAY_FOR_MISSED_TICKS:
            return "no_delay_for_missed_ticks";
        case LIBXL_TIMER_MODE_NO_MISSED_TICKS_PENDING:
            return "no_missed_ticks_pending";
        case LIBXL_TIMER_MODE_ONE_MISSED_TICK_PENDING:
            return "one_missed_tick_pending";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_timer_mode_string_table[] = {
    { .s = "unknown", .v = LIBXL_TIMER_MODE_UNKNOWN },
    { .s = "delay_for_missed_ticks", .v = LIBXL_TIMER_MODE_DELAY_FOR_MISSED_TICKS },
    { .s = "no_delay_for_missed_ticks", .v = LIBXL_TIMER_MODE_NO_DELAY_FOR_MISSED_TICKS },
    { .s = "no_missed_ticks_pending", .v = LIBXL_TIMER_MODE_NO_MISSED_TICKS_PENDING },
    { .s = "one_missed_tick_pending", .v = LIBXL_TIMER_MODE_ONE_MISSED_TICK_PENDING },
    { NULL, -1 },
};

int libxl_timer_mode_from_string(const char *s, libxl_timer_mode *e)
{
    return libxl__enum_from_string(libxl_timer_mode_string_table,
                                   s, (int *)e);
}

const char *libxl_bios_type_to_string(libxl_bios_type e)
{
    switch(e) {
        case LIBXL_BIOS_TYPE_UNKNOWN:
            return "unknown";
        case LIBXL_BIOS_TYPE_ROMBIOS:
            return "rombios";
        case LIBXL_BIOS_TYPE_SEABIOS:
            return "seabios";
        case LIBXL_BIOS_TYPE_OVMF:
            return "ovmf";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_bios_type_string_table[] = {
    { .s = "unknown", .v = LIBXL_BIOS_TYPE_UNKNOWN },
    { .s = "rombios", .v = LIBXL_BIOS_TYPE_ROMBIOS },
    { .s = "seabios", .v = LIBXL_BIOS_TYPE_SEABIOS },
    { .s = "ovmf", .v = LIBXL_BIOS_TYPE_OVMF },
    { NULL, -1 },
};

int libxl_bios_type_from_string(const char *s, libxl_bios_type *e)
{
    return libxl__enum_from_string(libxl_bios_type_string_table,
                                   s, (int *)e);
}

const char *libxl_scheduler_to_string(libxl_scheduler e)
{
    switch(e) {
        case LIBXL_SCHEDULER_UNKNOWN:
            return "unknown";
        case LIBXL_SCHEDULER_SEDF:
            return "sedf";
        case LIBXL_SCHEDULER_CREDIT:
            return "credit";
        case LIBXL_SCHEDULER_CREDIT2:
            return "credit2";
        case LIBXL_SCHEDULER_ARINC653:
            return "arinc653";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_scheduler_string_table[] = {
    { .s = "unknown", .v = LIBXL_SCHEDULER_UNKNOWN },
    { .s = "sedf", .v = LIBXL_SCHEDULER_SEDF },
    { .s = "credit", .v = LIBXL_SCHEDULER_CREDIT },
    { .s = "credit2", .v = LIBXL_SCHEDULER_CREDIT2 },
    { .s = "arinc653", .v = LIBXL_SCHEDULER_ARINC653 },
    { NULL, -1 },
};

int libxl_scheduler_from_string(const char *s, libxl_scheduler *e)
{
    return libxl__enum_from_string(libxl_scheduler_string_table,
                                   s, (int *)e);
}

const char *libxl_shutdown_reason_to_string(libxl_shutdown_reason e)
{
    switch(e) {
        case LIBXL_SHUTDOWN_REASON_UNKNOWN:
            return "unknown";
        case LIBXL_SHUTDOWN_REASON_POWEROFF:
            return "poweroff";
        case LIBXL_SHUTDOWN_REASON_REBOOT:
            return "reboot";
        case LIBXL_SHUTDOWN_REASON_SUSPEND:
            return "suspend";
        case LIBXL_SHUTDOWN_REASON_CRASH:
            return "crash";
        case LIBXL_SHUTDOWN_REASON_WATCHDOG:
            return "watchdog";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_shutdown_reason_string_table[] = {
    { .s = "unknown", .v = LIBXL_SHUTDOWN_REASON_UNKNOWN },
    { .s = "poweroff", .v = LIBXL_SHUTDOWN_REASON_POWEROFF },
    { .s = "reboot", .v = LIBXL_SHUTDOWN_REASON_REBOOT },
    { .s = "suspend", .v = LIBXL_SHUTDOWN_REASON_SUSPEND },
    { .s = "crash", .v = LIBXL_SHUTDOWN_REASON_CRASH },
    { .s = "watchdog", .v = LIBXL_SHUTDOWN_REASON_WATCHDOG },
    { NULL, -1 },
};

int libxl_shutdown_reason_from_string(const char *s, libxl_shutdown_reason *e)
{
    return libxl__enum_from_string(libxl_shutdown_reason_string_table,
                                   s, (int *)e);
}

const char *libxl_vga_interface_type_to_string(libxl_vga_interface_type e)
{
    switch(e) {
        case LIBXL_VGA_INTERFACE_TYPE_CIRRUS:
            return "cirrus";
        case LIBXL_VGA_INTERFACE_TYPE_STD:
            return "std";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_vga_interface_type_string_table[] = {
    { .s = "cirrus", .v = LIBXL_VGA_INTERFACE_TYPE_CIRRUS },
    { .s = "std", .v = LIBXL_VGA_INTERFACE_TYPE_STD },
    { NULL, -1 },
};

int libxl_vga_interface_type_from_string(const char *s, libxl_vga_interface_type *e)
{
    return libxl__enum_from_string(libxl_vga_interface_type_string_table,
                                   s, (int *)e);
}

const char *libxl_vendor_device_to_string(libxl_vendor_device e)
{
    switch(e) {
        case LIBXL_VENDOR_DEVICE_NONE:
            return "none";
        case LIBXL_VENDOR_DEVICE_XENSERVER:
            return "xenserver";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_vendor_device_string_table[] = {
    { .s = "none", .v = LIBXL_VENDOR_DEVICE_NONE },
    { .s = "xenserver", .v = LIBXL_VENDOR_DEVICE_XENSERVER },
    { NULL, -1 },
};

int libxl_vendor_device_from_string(const char *s, libxl_vendor_device *e)
{
    return libxl__enum_from_string(libxl_vendor_device_string_table,
                                   s, (int *)e);
}

const char *libxl_event_type_to_string(libxl_event_type e)
{
    switch(e) {
        case LIBXL_EVENT_TYPE_DOMAIN_SHUTDOWN:
            return "domain_shutdown";
        case LIBXL_EVENT_TYPE_DOMAIN_DEATH:
            return "domain_death";
        case LIBXL_EVENT_TYPE_DISK_EJECT:
            return "disk_eject";
        case LIBXL_EVENT_TYPE_OPERATION_COMPLETE:
            return "operation_complete";
        case LIBXL_EVENT_TYPE_DOMAIN_CREATE_CONSOLE_AVAILABLE:
            return "domain_create_console_available";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_event_type_string_table[] = {
    { .s = "domain_shutdown", .v = LIBXL_EVENT_TYPE_DOMAIN_SHUTDOWN },
    { .s = "domain_death", .v = LIBXL_EVENT_TYPE_DOMAIN_DEATH },
    { .s = "disk_eject", .v = LIBXL_EVENT_TYPE_DISK_EJECT },
    { .s = "operation_complete", .v = LIBXL_EVENT_TYPE_OPERATION_COMPLETE },
    { .s = "domain_create_console_available", .v = LIBXL_EVENT_TYPE_DOMAIN_CREATE_CONSOLE_AVAILABLE },
    { NULL, -1 },
};

int libxl_event_type_from_string(const char *s, libxl_event_type *e)
{
    return libxl__enum_from_string(libxl_event_type_string_table,
                                   s, (int *)e);
}

yajl_gen_status libxl_error_gen_json(yajl_gen hand, libxl_error *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_error_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_error_to_json(libxl_ctx *ctx, libxl_error p)
{
    return libxl__object_to_json(ctx, "libxl_error", (libxl__gen_json_callback)&libxl_error_gen_json, (void *)&p);
}

yajl_gen_status libxl_domain_type_gen_json(yajl_gen hand, libxl_domain_type *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_domain_type_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_domain_type_to_json(libxl_ctx *ctx, libxl_domain_type p)
{
    return libxl__object_to_json(ctx, "libxl_domain_type", (libxl__gen_json_callback)&libxl_domain_type_gen_json, (void *)&p);
}

yajl_gen_status libxl_device_model_version_gen_json(yajl_gen hand, libxl_device_model_version *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_device_model_version_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_device_model_version_to_json(libxl_ctx *ctx, libxl_device_model_version p)
{
    return libxl__object_to_json(ctx, "libxl_device_model_version", (libxl__gen_json_callback)&libxl_device_model_version_gen_json, (void *)&p);
}

yajl_gen_status libxl_console_type_gen_json(yajl_gen hand, libxl_console_type *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_console_type_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_console_type_to_json(libxl_ctx *ctx, libxl_console_type p)
{
    return libxl__object_to_json(ctx, "libxl_console_type", (libxl__gen_json_callback)&libxl_console_type_gen_json, (void *)&p);
}

yajl_gen_status libxl_disk_format_gen_json(yajl_gen hand, libxl_disk_format *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_disk_format_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_disk_format_to_json(libxl_ctx *ctx, libxl_disk_format p)
{
    return libxl__object_to_json(ctx, "libxl_disk_format", (libxl__gen_json_callback)&libxl_disk_format_gen_json, (void *)&p);
}

yajl_gen_status libxl_disk_backend_gen_json(yajl_gen hand, libxl_disk_backend *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_disk_backend_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_disk_backend_to_json(libxl_ctx *ctx, libxl_disk_backend p)
{
    return libxl__object_to_json(ctx, "libxl_disk_backend", (libxl__gen_json_callback)&libxl_disk_backend_gen_json, (void *)&p);
}

yajl_gen_status libxl_nic_type_gen_json(yajl_gen hand, libxl_nic_type *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_nic_type_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_nic_type_to_json(libxl_ctx *ctx, libxl_nic_type p)
{
    return libxl__object_to_json(ctx, "libxl_nic_type", (libxl__gen_json_callback)&libxl_nic_type_gen_json, (void *)&p);
}

yajl_gen_status libxl_action_on_shutdown_gen_json(yajl_gen hand, libxl_action_on_shutdown *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_action_on_shutdown_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_action_on_shutdown_to_json(libxl_ctx *ctx, libxl_action_on_shutdown p)
{
    return libxl__object_to_json(ctx, "libxl_action_on_shutdown", (libxl__gen_json_callback)&libxl_action_on_shutdown_gen_json, (void *)&p);
}

yajl_gen_status libxl_trigger_gen_json(yajl_gen hand, libxl_trigger *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_trigger_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_trigger_to_json(libxl_ctx *ctx, libxl_trigger p)
{
    return libxl__object_to_json(ctx, "libxl_trigger", (libxl__gen_json_callback)&libxl_trigger_gen_json, (void *)&p);
}

yajl_gen_status libxl_tsc_mode_gen_json(yajl_gen hand, libxl_tsc_mode *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_tsc_mode_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_tsc_mode_to_json(libxl_ctx *ctx, libxl_tsc_mode p)
{
    return libxl__object_to_json(ctx, "libxl_tsc_mode", (libxl__gen_json_callback)&libxl_tsc_mode_gen_json, (void *)&p);
}

yajl_gen_status libxl_timer_mode_gen_json(yajl_gen hand, libxl_timer_mode *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_timer_mode_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_timer_mode_to_json(libxl_ctx *ctx, libxl_timer_mode p)
{
    return libxl__object_to_json(ctx, "libxl_timer_mode", (libxl__gen_json_callback)&libxl_timer_mode_gen_json, (void *)&p);
}

yajl_gen_status libxl_bios_type_gen_json(yajl_gen hand, libxl_bios_type *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_bios_type_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_bios_type_to_json(libxl_ctx *ctx, libxl_bios_type p)
{
    return libxl__object_to_json(ctx, "libxl_bios_type", (libxl__gen_json_callback)&libxl_bios_type_gen_json, (void *)&p);
}

yajl_gen_status libxl_scheduler_gen_json(yajl_gen hand, libxl_scheduler *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_scheduler_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_scheduler_to_json(libxl_ctx *ctx, libxl_scheduler p)
{
    return libxl__object_to_json(ctx, "libxl_scheduler", (libxl__gen_json_callback)&libxl_scheduler_gen_json, (void *)&p);
}

yajl_gen_status libxl_shutdown_reason_gen_json(yajl_gen hand, libxl_shutdown_reason *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_shutdown_reason_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_shutdown_reason_to_json(libxl_ctx *ctx, libxl_shutdown_reason p)
{
    return libxl__object_to_json(ctx, "libxl_shutdown_reason", (libxl__gen_json_callback)&libxl_shutdown_reason_gen_json, (void *)&p);
}

yajl_gen_status libxl_vga_interface_type_gen_json(yajl_gen hand, libxl_vga_interface_type *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_vga_interface_type_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_vga_interface_type_to_json(libxl_ctx *ctx, libxl_vga_interface_type p)
{
    return libxl__object_to_json(ctx, "libxl_vga_interface_type", (libxl__gen_json_callback)&libxl_vga_interface_type_gen_json, (void *)&p);
}

yajl_gen_status libxl_vendor_device_gen_json(yajl_gen hand, libxl_vendor_device *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_vendor_device_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_vendor_device_to_json(libxl_ctx *ctx, libxl_vendor_device p)
{
    return libxl__object_to_json(ctx, "libxl_vendor_device", (libxl__gen_json_callback)&libxl_vendor_device_gen_json, (void *)&p);
}

yajl_gen_status libxl_ioport_range_gen_json(yajl_gen hand, libxl_ioport_range *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"first", sizeof("first")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->first);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"number", sizeof("number")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->number);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_ioport_range_to_json(libxl_ctx *ctx, libxl_ioport_range *p)
{
    return libxl__object_to_json(ctx, "libxl_ioport_range", (libxl__gen_json_callback)&libxl_ioport_range_gen_json, (void *)p);
}

yajl_gen_status libxl_iomem_range_gen_json(yajl_gen hand, libxl_iomem_range *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"start", sizeof("start")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->start);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"number", sizeof("number")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->number);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_iomem_range_to_json(libxl_ctx *ctx, libxl_iomem_range *p)
{
    return libxl__object_to_json(ctx, "libxl_iomem_range", (libxl__gen_json_callback)&libxl_iomem_range_gen_json, (void *)p);
}

yajl_gen_status libxl_vga_interface_info_gen_json(yajl_gen hand, libxl_vga_interface_info *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"kind", sizeof("kind")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__yajl_gen_enum(hand, libxl_vga_interface_type_to_string(p->kind));
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_vga_interface_info_to_json(libxl_ctx *ctx, libxl_vga_interface_info *p)
{
    return libxl__object_to_json(ctx, "libxl_vga_interface_info", (libxl__gen_json_callback)&libxl_vga_interface_info_gen_json, (void *)p);
}

yajl_gen_status libxl_vnc_info_gen_json(yajl_gen hand, libxl_vnc_info *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"enable", sizeof("enable")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_defbool_gen_json(hand, &p->enable);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"listen", sizeof("listen")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->listen);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"passwd", sizeof("passwd")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->passwd);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"display", sizeof("display")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->display);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"findunused", sizeof("findunused")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_defbool_gen_json(hand, &p->findunused);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_vnc_info_to_json(libxl_ctx *ctx, libxl_vnc_info *p)
{
    return libxl__object_to_json(ctx, "libxl_vnc_info", (libxl__gen_json_callback)&libxl_vnc_info_gen_json, (void *)p);
}

yajl_gen_status libxl_spice_info_gen_json(yajl_gen hand, libxl_spice_info *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"enable", sizeof("enable")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_defbool_gen_json(hand, &p->enable);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"port", sizeof("port")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->port);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"tls_port", sizeof("tls_port")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->tls_port);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"host", sizeof("host")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->host);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"disable_ticketing", sizeof("disable_ticketing")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_defbool_gen_json(hand, &p->disable_ticketing);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"passwd", sizeof("passwd")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->passwd);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"agent_mouse", sizeof("agent_mouse")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_defbool_gen_json(hand, &p->agent_mouse);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"vdagent", sizeof("vdagent")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_defbool_gen_json(hand, &p->vdagent);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"clipboard_sharing", sizeof("clipboard_sharing")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_defbool_gen_json(hand, &p->clipboard_sharing);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"usbredirection", sizeof("usbredirection")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->usbredirection);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_spice_info_to_json(libxl_ctx *ctx, libxl_spice_info *p)
{
    return libxl__object_to_json(ctx, "libxl_spice_info", (libxl__gen_json_callback)&libxl_spice_info_gen_json, (void *)p);
}

yajl_gen_status libxl_sdl_info_gen_json(yajl_gen hand, libxl_sdl_info *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"enable", sizeof("enable")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_defbool_gen_json(hand, &p->enable);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"opengl", sizeof("opengl")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_defbool_gen_json(hand, &p->opengl);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"display", sizeof("display")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->display);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"xauthority", sizeof("xauthority")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->xauthority);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_sdl_info_to_json(libxl_ctx *ctx, libxl_sdl_info *p)
{
    return libxl__object_to_json(ctx, "libxl_sdl_info", (libxl__gen_json_callback)&libxl_sdl_info_gen_json, (void *)p);
}

yajl_gen_status libxl_dominfo_gen_json(yajl_gen hand, libxl_dominfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"uuid", sizeof("uuid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_uuid_gen_json(hand, &p->uuid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"domid", sizeof("domid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->domid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"ssidref", sizeof("ssidref")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->ssidref);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"running", sizeof("running")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_bool(hand, p->running);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"blocked", sizeof("blocked")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_bool(hand, p->blocked);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"paused", sizeof("paused")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_bool(hand, p->paused);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"shutdown", sizeof("shutdown")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_bool(hand, p->shutdown);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"dying", sizeof("dying")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_bool(hand, p->dying);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"shutdown_reason", sizeof("shutdown_reason")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__yajl_gen_enum(hand, libxl_shutdown_reason_to_string(p->shutdown_reason));
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"outstanding_memkb", sizeof("outstanding_memkb")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->outstanding_memkb);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"current_memkb", sizeof("current_memkb")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->current_memkb);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"shared_memkb", sizeof("shared_memkb")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->shared_memkb);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"paged_memkb", sizeof("paged_memkb")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->paged_memkb);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"max_memkb", sizeof("max_memkb")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->max_memkb);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"cpu_time", sizeof("cpu_time")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->cpu_time);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"vcpu_max_id", sizeof("vcpu_max_id")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->vcpu_max_id);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"vcpu_online", sizeof("vcpu_online")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->vcpu_online);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"cpupool", sizeof("cpupool")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->cpupool);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"domain_type", sizeof("domain_type")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__yajl_gen_enum(hand, libxl_domain_type_to_string(p->domain_type));
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_dominfo_to_json(libxl_ctx *ctx, libxl_dominfo *p)
{
    return libxl__object_to_json(ctx, "libxl_dominfo", (libxl__gen_json_callback)&libxl_dominfo_gen_json, (void *)p);
}

yajl_gen_status libxl_cpupoolinfo_gen_json(yajl_gen hand, libxl_cpupoolinfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"poolid", sizeof("poolid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->poolid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"sched", sizeof("sched")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__yajl_gen_enum(hand, libxl_scheduler_to_string(p->sched));
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"n_dom", sizeof("n_dom")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->n_dom);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"cpumap", sizeof("cpumap")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_bitmap_gen_json(hand, &p->cpumap);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_cpupoolinfo_to_json(libxl_ctx *ctx, libxl_cpupoolinfo *p)
{
    return libxl__object_to_json(ctx, "libxl_cpupoolinfo", (libxl__gen_json_callback)&libxl_cpupoolinfo_gen_json, (void *)p);
}

yajl_gen_status libxl_vminfo_gen_json(yajl_gen hand, libxl_vminfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"uuid", sizeof("uuid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_uuid_gen_json(hand, &p->uuid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"domid", sizeof("domid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->domid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_vminfo_to_json(libxl_ctx *ctx, libxl_vminfo *p)
{
    return libxl__object_to_json(ctx, "libxl_vminfo", (libxl__gen_json_callback)&libxl_vminfo_gen_json, (void *)p);
}

yajl_gen_status libxl_version_info_gen_json(yajl_gen hand, libxl_version_info *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"xen_version_major", sizeof("xen_version_major")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->xen_version_major);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"xen_version_minor", sizeof("xen_version_minor")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->xen_version_minor);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"xen_version_extra", sizeof("xen_version_extra")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->xen_version_extra);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"compiler", sizeof("compiler")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->compiler);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"compile_by", sizeof("compile_by")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->compile_by);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"compile_domain", sizeof("compile_domain")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->compile_domain);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"compile_date", sizeof("compile_date")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->compile_date);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"capabilities", sizeof("capabilities")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->capabilities);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"changeset", sizeof("changeset")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->changeset);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"virt_start", sizeof("virt_start")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->virt_start);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"pagesize", sizeof("pagesize")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->pagesize);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"commandline", sizeof("commandline")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->commandline);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_version_info_to_json(libxl_ctx *ctx, libxl_version_info *p)
{
    return libxl__object_to_json(ctx, "libxl_version_info", (libxl__gen_json_callback)&libxl_version_info_gen_json, (void *)p);
}

yajl_gen_status libxl_domain_create_info_gen_json(yajl_gen hand, libxl_domain_create_info *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"type", sizeof("type")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__yajl_gen_enum(hand, libxl_domain_type_to_string(p->type));
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"hap", sizeof("hap")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_defbool_gen_json(hand, &p->hap);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"oos", sizeof("oos")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_defbool_gen_json(hand, &p->oos);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"ssidref", sizeof("ssidref")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->ssidref);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"name", sizeof("name")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->name);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"uuid", sizeof("uuid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_uuid_gen_json(hand, &p->uuid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"xsdata", sizeof("xsdata")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_key_value_list_gen_json(hand, &p->xsdata);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"platformdata", sizeof("platformdata")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_key_value_list_gen_json(hand, &p->platformdata);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"poolid", sizeof("poolid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->poolid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"run_hotplug_scripts", sizeof("run_hotplug_scripts")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_defbool_gen_json(hand, &p->run_hotplug_scripts);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"pvh", sizeof("pvh")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_defbool_gen_json(hand, &p->pvh);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"driver_domain", sizeof("driver_domain")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_defbool_gen_json(hand, &p->driver_domain);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_domain_create_info_to_json(libxl_ctx *ctx, libxl_domain_create_info *p)
{
    return libxl__object_to_json(ctx, "libxl_domain_create_info", (libxl__gen_json_callback)&libxl_domain_create_info_gen_json, (void *)p);
}

yajl_gen_status libxl_domain_restore_params_gen_json(yajl_gen hand, libxl_domain_restore_params *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"checkpointed_stream", sizeof("checkpointed_stream")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->checkpointed_stream);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_domain_restore_params_to_json(libxl_ctx *ctx, libxl_domain_restore_params *p)
{
    return libxl__object_to_json(ctx, "libxl_domain_restore_params", (libxl__gen_json_callback)&libxl_domain_restore_params_gen_json, (void *)p);
}

yajl_gen_status libxl_domain_sched_params_gen_json(yajl_gen hand, libxl_domain_sched_params *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"sched", sizeof("sched")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__yajl_gen_enum(hand, libxl_scheduler_to_string(p->sched));
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"weight", sizeof("weight")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->weight);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"cap", sizeof("cap")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->cap);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"period", sizeof("period")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->period);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"slice", sizeof("slice")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->slice);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"latency", sizeof("latency")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->latency);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"extratime", sizeof("extratime")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->extratime);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_domain_sched_params_to_json(libxl_ctx *ctx, libxl_domain_sched_params *p)
{
    return libxl__object_to_json(ctx, "libxl_domain_sched_params", (libxl__gen_json_callback)&libxl_domain_sched_params_gen_json, (void *)p);
}

yajl_gen_status libxl_domain_build_info_gen_json(yajl_gen hand, libxl_domain_build_info *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"max_vcpus", sizeof("max_vcpus")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->max_vcpus);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"avail_vcpus", sizeof("avail_vcpus")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_bitmap_gen_json(hand, &p->avail_vcpus);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"cpumap", sizeof("cpumap")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_bitmap_gen_json(hand, &p->cpumap);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"nodemap", sizeof("nodemap")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_bitmap_gen_json(hand, &p->nodemap);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"numa_placement", sizeof("numa_placement")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_defbool_gen_json(hand, &p->numa_placement);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"tsc_mode", sizeof("tsc_mode")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__yajl_gen_enum(hand, libxl_tsc_mode_to_string(p->tsc_mode));
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"max_memkb", sizeof("max_memkb")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->max_memkb);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"target_memkb", sizeof("target_memkb")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->target_memkb);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"video_memkb", sizeof("video_memkb")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->video_memkb);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"shadow_memkb", sizeof("shadow_memkb")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->shadow_memkb);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"rtc_timeoffset", sizeof("rtc_timeoffset")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->rtc_timeoffset);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"exec_ssidref", sizeof("exec_ssidref")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->exec_ssidref);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"localtime", sizeof("localtime")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_defbool_gen_json(hand, &p->localtime);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"disable_migrate", sizeof("disable_migrate")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_defbool_gen_json(hand, &p->disable_migrate);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"cpuid", sizeof("cpuid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_cpuid_policy_list_gen_json(hand, &p->cpuid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"blkdev_start", sizeof("blkdev_start")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->blkdev_start);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"device_model_version", sizeof("device_model_version")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__yajl_gen_enum(hand, libxl_device_model_version_to_string(p->device_model_version));
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"device_model_stubdomain", sizeof("device_model_stubdomain")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_defbool_gen_json(hand, &p->device_model_stubdomain);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"device_model", sizeof("device_model")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->device_model);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"device_model_ssidref", sizeof("device_model_ssidref")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->device_model_ssidref);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"extra", sizeof("extra")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_string_list_gen_json(hand, &p->extra);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"extra_pv", sizeof("extra_pv")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_string_list_gen_json(hand, &p->extra_pv);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"extra_hvm", sizeof("extra_hvm")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_string_list_gen_json(hand, &p->extra_hvm);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"sched_params", sizeof("sched_params")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_domain_sched_params_gen_json(hand, &p->sched_params);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"ioports", sizeof("ioports")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    {
        int i;
        s = yajl_gen_array_open(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        for (i=0; i<p->num_ioports; i++) {
            s = libxl_ioport_range_gen_json(hand, &p->ioports[i]);
            if (s != yajl_gen_status_ok)
                goto out;
        }
        s = yajl_gen_array_close(hand);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_string(hand, (const unsigned char *)"irqs", sizeof("irqs")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    {
        int i;
        s = yajl_gen_array_open(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        for (i=0; i<p->num_irqs; i++) {
            s = yajl_gen_integer(hand, p->irqs[i]);
            if (s != yajl_gen_status_ok)
                goto out;
        }
        s = yajl_gen_array_close(hand);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_string(hand, (const unsigned char *)"iomem", sizeof("iomem")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    {
        int i;
        s = yajl_gen_array_open(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        for (i=0; i<p->num_iomem; i++) {
            s = libxl_iomem_range_gen_json(hand, &p->iomem[i]);
            if (s != yajl_gen_status_ok)
                goto out;
        }
        s = yajl_gen_array_close(hand);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_string(hand, (const unsigned char *)"claim_mode", sizeof("claim_mode")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_defbool_gen_json(hand, &p->claim_mode);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"event_channels", sizeof("event_channels")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->event_channels);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"u", sizeof("u")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    switch (p->type) {
    case LIBXL_DOMAIN_TYPE_HVM:
        s = yajl_gen_map_open(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"firmware", sizeof("firmware")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->u.hvm.firmware);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"bios", sizeof("bios")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_bios_type_to_string(p->u.hvm.bios));
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"pae", sizeof("pae")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->u.hvm.pae);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"apic", sizeof("apic")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->u.hvm.apic);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"acpi", sizeof("acpi")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->u.hvm.acpi);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"acpi_s3", sizeof("acpi_s3")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->u.hvm.acpi_s3);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"acpi_s4", sizeof("acpi_s4")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->u.hvm.acpi_s4);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"nx", sizeof("nx")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->u.hvm.nx);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"viridian", sizeof("viridian")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->u.hvm.viridian);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"timeoffset", sizeof("timeoffset")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->u.hvm.timeoffset);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"hpet", sizeof("hpet")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->u.hvm.hpet);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"vpt_align", sizeof("vpt_align")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->u.hvm.vpt_align);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"timer_mode", sizeof("timer_mode")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_timer_mode_to_string(p->u.hvm.timer_mode));
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"nested_hvm", sizeof("nested_hvm")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->u.hvm.nested_hvm);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"smbios_firmware", sizeof("smbios_firmware")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->u.hvm.smbios_firmware);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"acpi_firmware", sizeof("acpi_firmware")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->u.hvm.acpi_firmware);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"nographic", sizeof("nographic")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->u.hvm.nographic);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"vga", sizeof("vga")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_vga_interface_info_gen_json(hand, &p->u.hvm.vga);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"vnc", sizeof("vnc")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_vnc_info_gen_json(hand, &p->u.hvm.vnc);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"keymap", sizeof("keymap")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->u.hvm.keymap);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"sdl", sizeof("sdl")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_sdl_info_gen_json(hand, &p->u.hvm.sdl);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"spice", sizeof("spice")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_spice_info_gen_json(hand, &p->u.hvm.spice);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"gfx_passthru", sizeof("gfx_passthru")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->u.hvm.gfx_passthru);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"serial", sizeof("serial")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->u.hvm.serial);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"boot", sizeof("boot")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->u.hvm.boot);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"usb", sizeof("usb")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->u.hvm.usb);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"usbversion", sizeof("usbversion")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->u.hvm.usbversion);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"usbdevice", sizeof("usbdevice")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->u.hvm.usbdevice);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"soundhw", sizeof("soundhw")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->u.hvm.soundhw);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"xen_platform_pci", sizeof("xen_platform_pci")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->u.hvm.xen_platform_pci);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"usbdevice_list", sizeof("usbdevice_list")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_string_list_gen_json(hand, &p->u.hvm.usbdevice_list);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"vendor_device", sizeof("vendor_device")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_vendor_device_to_string(p->u.hvm.vendor_device));
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_map_close(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        break;
    case LIBXL_DOMAIN_TYPE_PV:
        s = yajl_gen_map_open(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"kernel", sizeof("kernel")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->u.pv.kernel);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"slack_memkb", sizeof("slack_memkb")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->u.pv.slack_memkb);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"bootloader", sizeof("bootloader")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->u.pv.bootloader);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"bootloader_args", sizeof("bootloader_args")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_string_list_gen_json(hand, &p->u.pv.bootloader_args);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"cmdline", sizeof("cmdline")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->u.pv.cmdline);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"ramdisk", sizeof("ramdisk")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->u.pv.ramdisk);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"e820_host", sizeof("e820_host")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->u.pv.e820_host);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_map_close(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        break;
    case LIBXL_DOMAIN_TYPE_INVALID:
        break;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_domain_build_info_to_json(libxl_ctx *ctx, libxl_domain_build_info *p)
{
    return libxl__object_to_json(ctx, "libxl_domain_build_info", (libxl__gen_json_callback)&libxl_domain_build_info_gen_json, (void *)p);
}

yajl_gen_status libxl_device_vfb_gen_json(yajl_gen hand, libxl_device_vfb *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"backend_domid", sizeof("backend_domid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->backend_domid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"backend_domname", sizeof("backend_domname")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->backend_domname);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"devid", sizeof("devid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->devid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"vnc", sizeof("vnc")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_vnc_info_gen_json(hand, &p->vnc);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"sdl", sizeof("sdl")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_sdl_info_gen_json(hand, &p->sdl);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"keymap", sizeof("keymap")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->keymap);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_device_vfb_to_json(libxl_ctx *ctx, libxl_device_vfb *p)
{
    return libxl__object_to_json(ctx, "libxl_device_vfb", (libxl__gen_json_callback)&libxl_device_vfb_gen_json, (void *)p);
}

yajl_gen_status libxl_device_vkb_gen_json(yajl_gen hand, libxl_device_vkb *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"backend_domid", sizeof("backend_domid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->backend_domid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"backend_domname", sizeof("backend_domname")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->backend_domname);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"devid", sizeof("devid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->devid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_device_vkb_to_json(libxl_ctx *ctx, libxl_device_vkb *p)
{
    return libxl__object_to_json(ctx, "libxl_device_vkb", (libxl__gen_json_callback)&libxl_device_vkb_gen_json, (void *)p);
}

yajl_gen_status libxl_device_disk_gen_json(yajl_gen hand, libxl_device_disk *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"backend_domid", sizeof("backend_domid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->backend_domid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"backend_domname", sizeof("backend_domname")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->backend_domname);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"pdev_path", sizeof("pdev_path")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->pdev_path);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"vdev", sizeof("vdev")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->vdev);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"backend", sizeof("backend")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__yajl_gen_enum(hand, libxl_disk_backend_to_string(p->backend));
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"format", sizeof("format")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__yajl_gen_enum(hand, libxl_disk_format_to_string(p->format));
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"script", sizeof("script")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->script);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"removable", sizeof("removable")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->removable);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"readwrite", sizeof("readwrite")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->readwrite);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"is_cdrom", sizeof("is_cdrom")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->is_cdrom);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_device_disk_to_json(libxl_ctx *ctx, libxl_device_disk *p)
{
    return libxl__object_to_json(ctx, "libxl_device_disk", (libxl__gen_json_callback)&libxl_device_disk_gen_json, (void *)p);
}

yajl_gen_status libxl_device_nic_gen_json(yajl_gen hand, libxl_device_nic *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"backend_domid", sizeof("backend_domid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->backend_domid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"backend_domname", sizeof("backend_domname")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->backend_domname);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"devid", sizeof("devid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->devid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"mtu", sizeof("mtu")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->mtu);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"model", sizeof("model")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->model);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"mac", sizeof("mac")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_mac_gen_json(hand, &p->mac);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"ip", sizeof("ip")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->ip);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"bridge", sizeof("bridge")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->bridge);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"ifname", sizeof("ifname")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->ifname);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"script", sizeof("script")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->script);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"nictype", sizeof("nictype")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__yajl_gen_enum(hand, libxl_nic_type_to_string(p->nictype));
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"rate_bytes_per_interval", sizeof("rate_bytes_per_interval")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->rate_bytes_per_interval);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"rate_interval_usecs", sizeof("rate_interval_usecs")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->rate_interval_usecs);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"gatewaydev", sizeof("gatewaydev")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->gatewaydev);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_device_nic_to_json(libxl_ctx *ctx, libxl_device_nic *p)
{
    return libxl__object_to_json(ctx, "libxl_device_nic", (libxl__gen_json_callback)&libxl_device_nic_gen_json, (void *)p);
}

yajl_gen_status libxl_device_pci_gen_json(yajl_gen hand, libxl_device_pci *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"func", sizeof("func")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->func);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"dev", sizeof("dev")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->dev);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"bus", sizeof("bus")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->bus);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"domain", sizeof("domain")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->domain);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"vdevfn", sizeof("vdevfn")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->vdevfn);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"vfunc_mask", sizeof("vfunc_mask")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->vfunc_mask);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"msitranslate", sizeof("msitranslate")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_bool(hand, p->msitranslate);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"power_mgmt", sizeof("power_mgmt")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_bool(hand, p->power_mgmt);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"permissive", sizeof("permissive")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_bool(hand, p->permissive);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_device_pci_to_json(libxl_ctx *ctx, libxl_device_pci *p)
{
    return libxl__object_to_json(ctx, "libxl_device_pci", (libxl__gen_json_callback)&libxl_device_pci_gen_json, (void *)p);
}

yajl_gen_status libxl_device_vtpm_gen_json(yajl_gen hand, libxl_device_vtpm *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"backend_domid", sizeof("backend_domid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->backend_domid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"backend_domname", sizeof("backend_domname")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->backend_domname);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"devid", sizeof("devid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->devid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"uuid", sizeof("uuid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_uuid_gen_json(hand, &p->uuid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_device_vtpm_to_json(libxl_ctx *ctx, libxl_device_vtpm *p)
{
    return libxl__object_to_json(ctx, "libxl_device_vtpm", (libxl__gen_json_callback)&libxl_device_vtpm_gen_json, (void *)p);
}

yajl_gen_status libxl_domain_config_gen_json(yajl_gen hand, libxl_domain_config *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"c_info", sizeof("c_info")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_domain_create_info_gen_json(hand, &p->c_info);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"b_info", sizeof("b_info")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_domain_build_info_gen_json(hand, &p->b_info);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"disks", sizeof("disks")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    {
        int i;
        s = yajl_gen_array_open(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        for (i=0; i<p->num_disks; i++) {
            s = libxl_device_disk_gen_json(hand, &p->disks[i]);
            if (s != yajl_gen_status_ok)
                goto out;
        }
        s = yajl_gen_array_close(hand);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_string(hand, (const unsigned char *)"nics", sizeof("nics")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    {
        int i;
        s = yajl_gen_array_open(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        for (i=0; i<p->num_nics; i++) {
            s = libxl_device_nic_gen_json(hand, &p->nics[i]);
            if (s != yajl_gen_status_ok)
                goto out;
        }
        s = yajl_gen_array_close(hand);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_string(hand, (const unsigned char *)"pcidevs", sizeof("pcidevs")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    {
        int i;
        s = yajl_gen_array_open(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        for (i=0; i<p->num_pcidevs; i++) {
            s = libxl_device_pci_gen_json(hand, &p->pcidevs[i]);
            if (s != yajl_gen_status_ok)
                goto out;
        }
        s = yajl_gen_array_close(hand);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_string(hand, (const unsigned char *)"vfbs", sizeof("vfbs")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    {
        int i;
        s = yajl_gen_array_open(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        for (i=0; i<p->num_vfbs; i++) {
            s = libxl_device_vfb_gen_json(hand, &p->vfbs[i]);
            if (s != yajl_gen_status_ok)
                goto out;
        }
        s = yajl_gen_array_close(hand);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_string(hand, (const unsigned char *)"vkbs", sizeof("vkbs")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    {
        int i;
        s = yajl_gen_array_open(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        for (i=0; i<p->num_vkbs; i++) {
            s = libxl_device_vkb_gen_json(hand, &p->vkbs[i]);
            if (s != yajl_gen_status_ok)
                goto out;
        }
        s = yajl_gen_array_close(hand);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_string(hand, (const unsigned char *)"vtpms", sizeof("vtpms")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    {
        int i;
        s = yajl_gen_array_open(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        for (i=0; i<p->num_vtpms; i++) {
            s = libxl_device_vtpm_gen_json(hand, &p->vtpms[i]);
            if (s != yajl_gen_status_ok)
                goto out;
        }
        s = yajl_gen_array_close(hand);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_string(hand, (const unsigned char *)"on_poweroff", sizeof("on_poweroff")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__yajl_gen_enum(hand, libxl_action_on_shutdown_to_string(p->on_poweroff));
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"on_reboot", sizeof("on_reboot")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__yajl_gen_enum(hand, libxl_action_on_shutdown_to_string(p->on_reboot));
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"on_watchdog", sizeof("on_watchdog")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__yajl_gen_enum(hand, libxl_action_on_shutdown_to_string(p->on_watchdog));
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"on_crash", sizeof("on_crash")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__yajl_gen_enum(hand, libxl_action_on_shutdown_to_string(p->on_crash));
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_domain_config_to_json(libxl_ctx *ctx, libxl_domain_config *p)
{
    return libxl__object_to_json(ctx, "libxl_domain_config", (libxl__gen_json_callback)&libxl_domain_config_gen_json, (void *)p);
}

yajl_gen_status libxl_diskinfo_gen_json(yajl_gen hand, libxl_diskinfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"backend", sizeof("backend")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->backend);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"backend_id", sizeof("backend_id")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->backend_id);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"frontend", sizeof("frontend")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->frontend);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"frontend_id", sizeof("frontend_id")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->frontend_id);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"devid", sizeof("devid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->devid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"state", sizeof("state")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->state);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"evtch", sizeof("evtch")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->evtch);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"rref", sizeof("rref")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->rref);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_diskinfo_to_json(libxl_ctx *ctx, libxl_diskinfo *p)
{
    return libxl__object_to_json(ctx, "libxl_diskinfo", (libxl__gen_json_callback)&libxl_diskinfo_gen_json, (void *)p);
}

yajl_gen_status libxl_nicinfo_gen_json(yajl_gen hand, libxl_nicinfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"backend", sizeof("backend")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->backend);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"backend_id", sizeof("backend_id")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->backend_id);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"frontend", sizeof("frontend")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->frontend);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"frontend_id", sizeof("frontend_id")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->frontend_id);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"devid", sizeof("devid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->devid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"state", sizeof("state")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->state);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"evtch", sizeof("evtch")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->evtch);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"rref_tx", sizeof("rref_tx")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->rref_tx);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"rref_rx", sizeof("rref_rx")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->rref_rx);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_nicinfo_to_json(libxl_ctx *ctx, libxl_nicinfo *p)
{
    return libxl__object_to_json(ctx, "libxl_nicinfo", (libxl__gen_json_callback)&libxl_nicinfo_gen_json, (void *)p);
}

yajl_gen_status libxl_vtpminfo_gen_json(yajl_gen hand, libxl_vtpminfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"backend", sizeof("backend")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->backend);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"backend_id", sizeof("backend_id")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->backend_id);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"frontend", sizeof("frontend")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl__string_gen_json(hand, p->frontend);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"frontend_id", sizeof("frontend_id")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->frontend_id);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"devid", sizeof("devid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->devid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"state", sizeof("state")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->state);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"evtch", sizeof("evtch")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->evtch);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"rref", sizeof("rref")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->rref);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"uuid", sizeof("uuid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_uuid_gen_json(hand, &p->uuid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_vtpminfo_to_json(libxl_ctx *ctx, libxl_vtpminfo *p)
{
    return libxl__object_to_json(ctx, "libxl_vtpminfo", (libxl__gen_json_callback)&libxl_vtpminfo_gen_json, (void *)p);
}

yajl_gen_status libxl_vcpuinfo_gen_json(yajl_gen hand, libxl_vcpuinfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"vcpuid", sizeof("vcpuid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->vcpuid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"cpu", sizeof("cpu")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->cpu);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"online", sizeof("online")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_bool(hand, p->online);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"blocked", sizeof("blocked")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_bool(hand, p->blocked);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"running", sizeof("running")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_bool(hand, p->running);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"vcpu_time", sizeof("vcpu_time")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->vcpu_time);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"cpumap", sizeof("cpumap")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_bitmap_gen_json(hand, &p->cpumap);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_vcpuinfo_to_json(libxl_ctx *ctx, libxl_vcpuinfo *p)
{
    return libxl__object_to_json(ctx, "libxl_vcpuinfo", (libxl__gen_json_callback)&libxl_vcpuinfo_gen_json, (void *)p);
}

yajl_gen_status libxl_physinfo_gen_json(yajl_gen hand, libxl_physinfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"threads_per_core", sizeof("threads_per_core")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->threads_per_core);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"cores_per_socket", sizeof("cores_per_socket")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->cores_per_socket);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"max_cpu_id", sizeof("max_cpu_id")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->max_cpu_id);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"nr_cpus", sizeof("nr_cpus")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->nr_cpus);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"cpu_khz", sizeof("cpu_khz")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->cpu_khz);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"total_pages", sizeof("total_pages")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->total_pages);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"free_pages", sizeof("free_pages")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->free_pages);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"scrub_pages", sizeof("scrub_pages")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->scrub_pages);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"outstanding_pages", sizeof("outstanding_pages")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->outstanding_pages);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"sharing_freed_pages", sizeof("sharing_freed_pages")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->sharing_freed_pages);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"sharing_used_frames", sizeof("sharing_used_frames")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->sharing_used_frames);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"nr_nodes", sizeof("nr_nodes")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->nr_nodes);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"hw_cap", sizeof("hw_cap")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_hwcap_gen_json(hand, &p->hw_cap);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"cap_hvm", sizeof("cap_hvm")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_bool(hand, p->cap_hvm);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"cap_hvm_directio", sizeof("cap_hvm_directio")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_bool(hand, p->cap_hvm_directio);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_physinfo_to_json(libxl_ctx *ctx, libxl_physinfo *p)
{
    return libxl__object_to_json(ctx, "libxl_physinfo", (libxl__gen_json_callback)&libxl_physinfo_gen_json, (void *)p);
}

yajl_gen_status libxl_numainfo_gen_json(yajl_gen hand, libxl_numainfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"size", sizeof("size")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->size);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"free", sizeof("free")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->free);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"dists", sizeof("dists")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    {
        int i;
        s = yajl_gen_array_open(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        for (i=0; i<p->num_dists; i++) {
            s = yajl_gen_integer(hand, p->dists[i]);
            if (s != yajl_gen_status_ok)
                goto out;
        }
        s = yajl_gen_array_close(hand);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_numainfo_to_json(libxl_ctx *ctx, libxl_numainfo *p)
{
    return libxl__object_to_json(ctx, "libxl_numainfo", (libxl__gen_json_callback)&libxl_numainfo_gen_json, (void *)p);
}

yajl_gen_status libxl_cputopology_gen_json(yajl_gen hand, libxl_cputopology *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"core", sizeof("core")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->core);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"socket", sizeof("socket")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->socket);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"node", sizeof("node")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->node);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_cputopology_to_json(libxl_ctx *ctx, libxl_cputopology *p)
{
    return libxl__object_to_json(ctx, "libxl_cputopology", (libxl__gen_json_callback)&libxl_cputopology_gen_json, (void *)p);
}

yajl_gen_status libxl_sched_credit_params_gen_json(yajl_gen hand, libxl_sched_credit_params *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"tslice_ms", sizeof("tslice_ms")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->tslice_ms);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"ratelimit_us", sizeof("ratelimit_us")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->ratelimit_us);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_sched_credit_params_to_json(libxl_ctx *ctx, libxl_sched_credit_params *p)
{
    return libxl__object_to_json(ctx, "libxl_sched_credit_params", (libxl__gen_json_callback)&libxl_sched_credit_params_gen_json, (void *)p);
}

yajl_gen_status libxl_domain_remus_info_gen_json(yajl_gen hand, libxl_domain_remus_info *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"interval", sizeof("interval")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->interval);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"blackhole", sizeof("blackhole")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_bool(hand, p->blackhole);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"compression", sizeof("compression")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_bool(hand, p->compression);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_domain_remus_info_to_json(libxl_ctx *ctx, libxl_domain_remus_info *p)
{
    return libxl__object_to_json(ctx, "libxl_domain_remus_info", (libxl__gen_json_callback)&libxl_domain_remus_info_gen_json, (void *)p);
}

yajl_gen_status libxl_event_type_gen_json(yajl_gen hand, libxl_event_type *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_event_type_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_event_type_to_json(libxl_ctx *ctx, libxl_event_type p)
{
    return libxl__object_to_json(ctx, "libxl_event_type", (libxl__gen_json_callback)&libxl_event_type_gen_json, (void *)&p);
}

yajl_gen_status libxl_event_gen_json(yajl_gen hand, libxl_event *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"link", sizeof("link")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"domid", sizeof("domid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->domid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"domuuid", sizeof("domuuid")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = libxl_uuid_gen_json(hand, &p->domuuid);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"for_user", sizeof("for_user")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_integer(hand, p->for_user);
    if (s != yajl_gen_status_ok)
        goto out;
    s = yajl_gen_string(hand, (const unsigned char *)"u", sizeof("u")-1);
    if (s != yajl_gen_status_ok)
        goto out;
    switch (p->type) {
    case LIBXL_EVENT_TYPE_DOMAIN_SHUTDOWN:
        s = yajl_gen_map_open(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"shutdown_reason", sizeof("shutdown_reason")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->u.domain_shutdown.shutdown_reason);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_map_close(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        break;
    case LIBXL_EVENT_TYPE_DOMAIN_DEATH:
        s = yajl_gen_map_open(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_map_close(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        break;
    case LIBXL_EVENT_TYPE_DISK_EJECT:
        s = yajl_gen_map_open(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"vdev", sizeof("vdev")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->u.disk_eject.vdev);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"disk", sizeof("disk")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_device_disk_gen_json(hand, &p->u.disk_eject.disk);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_map_close(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        break;
    case LIBXL_EVENT_TYPE_OPERATION_COMPLETE:
        s = yajl_gen_map_open(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_string(hand, (const unsigned char *)"rc", sizeof("rc")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->u.operation_complete.rc);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_map_close(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        break;
    case LIBXL_EVENT_TYPE_DOMAIN_CREATE_CONSOLE_AVAILABLE:
        s = yajl_gen_map_open(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_map_close(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        break;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_event_to_json(libxl_ctx *ctx, libxl_event *p)
{
    return libxl__object_to_json(ctx, "libxl_event", (libxl__gen_json_callback)&libxl_event_gen_json, (void *)p);
}

