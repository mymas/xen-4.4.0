<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#NOTES">NOTES</a></li>
  <li><a href="#DOMAIN-SUBCOMMANDS">DOMAIN SUBCOMMANDS</a></li>
  <li><a href="#XEN-HOST-SUBCOMMANDS">XEN HOST SUBCOMMANDS</a></li>
  <li><a href="#SCHEDULER-SUBCOMMANDS">SCHEDULER SUBCOMMANDS</a></li>
  <li><a href="#VIRTUAL-DEVICE-COMMANDS">VIRTUAL DEVICE COMMANDS</a>
    <ul>
      <li><a href="#BLOCK-DEVICES">BLOCK DEVICES</a></li>
      <li><a href="#NETWORK-DEVICES">NETWORK DEVICES</a></li>
    </ul>
  </li>
  <li><a href="#SEE-ALSO">SEE ALSO</a></li>
  <li><a href="#AUTHOR">AUTHOR</a></li>
  <li><a href="#BUGS">BUGS</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>xm - Obsolete xen management user interface</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<p><b>xm</b> <i>subcommand</i> [<i>args</i>]</p>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>This program is now superseded by <b>xl</b>, which should be largely backwards-compatible with <b>xm</b>.</p>

<p>The <b>xm</b> program is the main interface for managing Xen guest domains when the obsolete Xend toolstack is in use. The program can be used to create, pause, and shutdown domains. It can also be used to list current domains, enable or pin VCPUs, and attach or detach virtual block devices.</p>

<p>The basic structure of every <b>xm</b> command is almost always:</p>

<ul>

<p><b>xm</b> <i>subcommand</i> <i>domain-id</i> [<i>OPTIONS</i>]</p>

</ul>

<p>Where <i>subcommand</i> is one of the subcommands listed below, <i>domain-id</i> is the numeric domain id, or the domain name (which will be internally translated to domain id), and <i>OPTIONS</i> are subcommand specific options. There are a few exceptions to this rule in the cases where the subcommand in question acts on all domains, the entire machine, or directly on the Xen hypervisor. Those exceptions will be clear for each of those subcommands.</p>

<h1 id="NOTES">NOTES</h1>

<p>All <b>xm</b> operations rely upon the Xen control daemon, aka <b>xend</b>. For any <b>xm</b> commands to run, xend must also be running. For this reason you should start xend as a service when your system first boots using Xen.</p>

<p>Most <b>xm</b> commands require root privileges to run due to the communications channels used to talk to the hypervisor. Running as non root will return an error.</p>

<p>Most <b>xm</b> commands act synchronously, except maybe create, shutdown, mem-set and vcpu-set. The fact that the <b>xm</b> command returned doesn&#39;t necessarily mean that the action is complete and you must poll through xm list periodically to detect that the operation completed.</p>

<h1 id="DOMAIN-SUBCOMMANDS">DOMAIN SUBCOMMANDS</h1>

<p>The following subcommands manipulate domains directly. As stated previously, most commands take <i>domain-id</i> as the first parameter.</p>

<dl>

<dt id="console-domain-id"><b>console</b> <i>domain-id</i></dt>
<dd>

<p>Attach to domain <i>domain-id</i>&#39;s console. If you&#39;ve set up your domains to have a traditional log in console this will look much like a normal text log in screen.</p>

<p>This uses the back end xenconsole service which currently only works for para-virtual domains.</p>

<p>The attached console will perform much like a standard serial console, so running curses based interfaces over the console <b>is not advised</b>. Vi tends to get very odd when using it over this interface.</p>

<p>Use the key combination Ctrl+] to detach the domain console.</p>

</dd>
<dt id="create-configfile-OPTIONS-vars"><b>create</b> <i>configfile</i> [<i>OPTIONS</i>] [<i>vars</i>]..</dt>
<dd>

<p>The create subcommand requires a config file and can optionally take a series of <i>vars</i> that add to or override variables defined in the config file. See <a>xmdomain.cfg</a> for full details of that file format, and possible options used in either the configfile or for <i>vars</i>.</p>

<p><i>configfile</i> can either be an absolute path to a file, or a relative path to a file located in /etc/xen.</p>

<p>Create will return <b>as soon</b> as the domain is started. This <b>does not</b> mean the guest OS in the domain has actually booted, or is available for input.</p>

<p><b>OPTIONS</b></p>

<dl>

<dt id="help_config"><b>--help_config</b></dt>
<dd>

<p>Print the available configuration variables <i>vars</i>. These variables may be used on the command line or in the configuration file <i>configfile</i>.</p>

</dd>
<dt id="q---quiet"><b>-q</b>, <b>--quiet</b></dt>
<dd>

<p>No console output.</p>

</dd>
<dt id="path"><b>--path</b></dt>
<dd>

<p>Search path for configuration scripts. The value of PATH is a colon-separated directory list.</p>

</dd>
<dt id="f-FILE---defconfig-FILE"><b>-f=FILE</b>, <b>--defconfig=FILE</b></dt>
<dd>

<p>Use the given Python configuration script. The configuration script is loaded after arguments have been processed. Each command-line option sets a configuration variable named after its long option name, and these variables are placed in the environment of the script before it is loaded. Variables for options that may be repeated have list values. Other variables can be set using name=value on the command line. After the script is loaded, option values that were not set on the command line are replaced by the values set in the script.</p>

</dd>
<dt id="F-FILE---config-FILE"><b>-F=FILE</b>, <b>--config=FILE</b></dt>
<dd>

<p>Use the given SXP formatted configuration script. SXP is the underlying configuration format used by Xen. SXP configuration scripts can be hand-written or generated from Python configuration scripts, using the -n (dryrun) option to print the configuration. An SXP formatted configuration file may also be generated for a given <i>domain-id</i> by redirecting the output from the the <b>xm list --long <i>domain-id</i></b> to a file.</p>

</dd>
<dt id="n---dryrun"><b>-n</b>, <b>--dryrun</b></dt>
<dd>

<p>Dry run - prints the resulting configuration in SXP but does not create the domain.</p>

</dd>
<dt id="x---xmldryrun"><b>-x</b>, <b>--xmldryrun</b></dt>
<dd>

<p>XML dry run - prints the resulting configuration in XML but does not create the domain.</p>

</dd>
<dt id="s---skipdtd"><b>-s</b>, <b>--skipdtd</b></dt>
<dd>

<p>Skip DTD checking - skips checks on XML before creating. Experimental. Can decrease create time.</p>

</dd>
<dt id="p---paused"><b>-p</b>, <b>--paused</b></dt>
<dd>

<p>Leave the domain paused after it is created.</p>

</dd>
<dt id="c---console_autoconnect"><b>-c</b>, <b>--console_autoconnect</b></dt>
<dd>

<p>Attach console to the domain as soon as it has started. This is useful for determining issues with crashing domains.</p>

</dd>
</dl>

<p><b>EXAMPLES</b></p>

<dl>

<dt id="with-config-file"><i>with config file</i></dt>
<dd>

<pre><code>  xm create Fedora4</code></pre>

<p>This creates a domain with the file /etc/xen/Fedora4, and returns as soon as it is run.</p>

</dd>
<dt id="without-config-file"><i>without config file</i></dt>
<dd>

<pre><code>  xm create /dev/null ramdisk=initrd.img \
     kernel=/boot/vmlinuz-2.6.12.6-xenU \
     name=ramdisk vif=&#39;&#39; vcpus=1 \
     memory=64 root=/dev/ram0</code></pre>

<p>This creates the domain without using a config file (more specifically using /dev/null as an empty config file), kernel and ramdisk as specified, setting the name of the domain to &quot;ramdisk&quot;, also disabling virtual networking. (This example comes from the xm-test test suite.)</p>

</dd>
</dl>

</dd>
<dt id="delete"><b>delete</b></dt>
<dd>

<p>Remove a domain from Xend domain management. The <b>xm list</b> command shows the domain names.</p>

</dd>
<dt id="destroy-domain-id"><b>destroy</b> <i>domain-id</i></dt>
<dd>

<p>Immediately terminate the domain <i>domain-id</i>. This doesn&#39;t give the domain OS any chance to react, and is the equivalent of ripping the power cord out on a physical machine. In most cases you will want to use the <b>shutdown</b> command instead.</p>

</dd>
<dt id="domid-domain-name"><b>domid</b> <i>domain-name</i></dt>
<dd>

<p>Converts a domain name to a domain id using xend&#39;s internal mapping.</p>

</dd>
<dt id="domname-domain-id"><b>domname</b> <i>domain-id</i></dt>
<dd>

<p>Converts a domain id to a domain name using xend&#39;s internal mapping.</p>

</dd>
<dt id="dump-core-OPTIONS-domain-id-filename"><b>dump-core</b> [<i>OPTIONS</i>] <i>domain-id</i> [<i>filename</i>]</dt>
<dd>

<p>Dumps the virtual machine&#39;s memory for the specified domain to the <i>filename</i> specified. The dump file will be written to a distribution specific directory for dump files. Such as: /var/lib/xen/dump or /var/xen/dump Defaults to dumping the core without pausing the domain if no <i>OPTIONS</i> are specified.</p>

<p><b>OPTIONS</b></p>

<dl>

<dt id="L---live"><b>-L</b>, <b>--live</b></dt>
<dd>

<p>Dump core without pausing the domain.</p>

</dd>
<dt id="C---crash"><b>-C</b>, <b>--crash</b></dt>
<dd>

<p>Crash domain after dumping core.</p>

</dd>
</dl>

</dd>
<dt id="help---long"><b>help</b> [<b>--long</b>]</dt>
<dd>

<p>Displays the short help message (i.e. common commands).</p>

<p>The <b>--long</b> option prints out the complete set of <b>xm</b> subcommands, grouped by function.</p>

</dd>
<dt id="list-OPTIONS-domain-id"><b>list</b> [<i>OPTIONS</i>] [<i>domain-id</i> ...]</dt>
<dd>

<p>Prints information about one or more domains. If no domains are specified it prints out information about all domains.</p>

<p><b>OPTIONS</b></p>

<dl>

<dt id="l---long"><b>-l</b>, <b>--long</b></dt>
<dd>

<p>The output for <b>xm list</b> is not the table view shown below, but instead presents the data in SXP format.</p>

</dd>
<dt id="label"><b>--label</b></dt>
<dd>

<p>Security labels are added to the output of xm list and the lines are sorted by the labels (ignoring case). See the ACCESS CONTROL SUBCOMMAND section of this man page for more information about labels.</p>

</dd>
<dt id="state-state"><b>--state=&lt;state</b>&gt;</dt>
<dd>

<p>Output information for VMs in the specified state.</p>

</dd>
</dl>

<p><b>EXAMPLE</b></p>

<p>An example format for the list is as follows:</p>

<pre><code>    Name                         ID Mem(MiB) VCPUs State  Time(s)
    Domain-0                      0       98     1 r-----  5068.6
    Fedora3                     164      128     1 r-----     7.6
    Fedora4                     165      128     1 ------     0.6
    Mandrake2006                166      128     1 -b----     3.6
    Mandrake10.2                167      128     1 ------     2.5
    Suse9.2                     168      100     1 ------     1.8</code></pre>

<p>Name is the name of the domain. ID the numeric domain id. Mem is the desired amount of memory to allocate to the domain (although it may not be the currently allocated amount). VCPUs is the number of virtual CPUs allocated to the domain. State is the run state (see below). Time is the total run time of the domain as accounted for by Xen.</p>

<p><b>STATES</b></p>

<p>The State field lists 6 states for a Xen domain, and which ones the current domain is in.</p>

<dl>

<dt id="r---running"><b>r - running</b></dt>
<dd>

<p>The domain is currently running on a CPU.</p>

</dd>
<dt id="b---blocked"><b>b - blocked</b></dt>
<dd>

<p>The domain is blocked, and not running or runnable. This can be caused because the domain is waiting on IO (a traditional wait state) or has gone to sleep because there was nothing else for it to do.</p>

</dd>
<dt id="p---paused1"><b>p - paused</b></dt>
<dd>

<p>The domain has been paused, usually occurring through the administrator running <b>xm pause</b>. When in a paused state the domain will still consume allocated resources like memory, but will not be eligible for scheduling by the Xen hypervisor.</p>

</dd>
<dt id="s---shutdown"><b>s - shutdown</b></dt>
<dd>

<p>FIXME: Why would you ever see this state?</p>

</dd>
<dt id="c---crashed"><b>c - crashed</b></dt>
<dd>

<p>The domain has crashed, which is always a violent ending. Usually this state can only occur if the domain has been configured not to restart on crash. See <a>xmdomain.cfg</a> for more info.</p>

</dd>
<dt id="d---dying"><b>d - dying</b></dt>
<dd>

<p>The domain is in process of dying, but hasn&#39;t completely shutdown or crashed.</p>

<p>FIXME: Is this right?</p>

</dd>
</dl>

<p><b>NOTES</b></p>

<ul>

<p>The Time column is deceptive. Virtual IO (network and block devices) used by domains requires coordination by Domain0, which means that Domain0 is actually charged for much of the time that a DomainU is doing IO. Use of this time value to determine relative utilizations by domains is thus very suspect, as a high IO workload may show as less utilized than a high CPU workload. Consider yourself warned.</p>

</ul>

</dd>
<dt id="mem-max-domain-id-mem"><b>mem-max</b> <i>domain-id</i> <i>mem</i></dt>
<dd>

<p>Specify the maximum amount of memory the domain is able to use. <i>mem</i> is specified in megabytes.</p>

<p>The mem-max value may not correspond to the actual memory used in the domain, as it may balloon down its memory to give more back to the OS.</p>

</dd>
<dt id="mem-set-domain-id-mem"><b>mem-set</b> <i>domain-id</i> <i>mem</i></dt>
<dd>

<p>Set the domain&#39;s used memory using the balloon driver.</p>

<p>Because this operation requires cooperation from the domain operating system, there is no guarantee that it will succeed. This command will definitely not work unless the domain has the required paravirt driver.</p>

<p><b>Warning:</b> There is no good way to know in advance how small of a mem-set will make a domain unstable and cause it to crash. Be very careful when using this command on running domains.</p>

</dd>
<dt id="migrate-domain-id-host-OPTIONS"><b>migrate</b> <i>domain-id</i> <i>host</i> [<i>OPTIONS</i>]</dt>
<dd>

<p>Migrate a domain to another host machine. Xend must be running on other host machine, it must be running the same version of Xen, it must have the migration TCP port open and accepting connections from the source host, and there must be sufficient resources for the domain to run (memory, disk, etc).</p>

<p>Migration is pretty complicated, and has many security implications. Please read the Xen User&#39;s Guide to ensure you understand the ramifications and limitations on migration before attempting it in production.</p>

<p><b>OPTIONS</b></p>

<dl>

<dt id="l---live"><b>-l</b>, <b>--live</b></dt>
<dd>

<p>Use live migration. This will migrate the domain between hosts without shutting down the domain. See the Xen User&#39;s Guide for more information.</p>

</dd>
<dt id="r---resource-Mbs"><b>-r</b>, <b>--resource</b> <i>Mbs</i></dt>
<dd>

<p>Set maximum Mbs allowed for migrating the domain. This ensures that the network link is not saturated with migration traffic while attempting to do other useful work.</p>

</dd>
</dl>

</dd>
<dt id="new-configfile-OPTIONS-vars"><b>new</b> <i>configfile</i> [<i>OPTIONS</i>] [<i>vars</i>]...</dt>
<dd>

<p>Adds a domain to Xend domain management.</p>

<p>The new subcommand requires a config file and can optionally take a series of <i>vars</i> that add to or override variables defined in the config file. See xmdomain.cfg for full details of that file format, and possible options used in either the configfile or for <i>vars</i>.</p>

<p><i>configfile</i> can either be an absolute path to a file, or a relative path to a file located in /etc/xen.</p>

<p>The new subcommand will return without starting the domain. The domain needs to be started using the <b>xm start</b> command.</p>

<p><b>OPTIONS</b></p>

<dl>

<dt id="help_config1"><b>--help_config</b></dt>
<dd>

<p>Print the available configuration variables <i>vars</i>. These variables may be used on the command line or in the configuration file <i>configfile</i>.</p>

</dd>
<dt id="q---quiet1"><b>-q</b>, <b>--quiet</b></dt>
<dd>

<p>No console output.</p>

</dd>
<dt id="path1"><b>--path</b></dt>
<dd>

<p>Search path for configuration scripts. The value of PATH is a colon-separated directory list.</p>

</dd>
<dt id="f-FILE---defconfig-FILE1"><b>-f=FILE</b>, <b>--defconfig=FILE</b></dt>
<dd>

<p>Use the given Python configuration script. The configuration script is loaded after arguments have been processed. Each command-line option sets a configuration variable named after its long option name, and these variables are placed in the environment of the script before it is loaded. Variables for options that may be repeated have list values. Other variables can be set using name=value on the command line. After the script is loaded, option values that were not set on the command line are replaced by the values set in the script.</p>

</dd>
<dt id="F-FILE---config-FILE1"><b>-F=FILE</b>, <b>--config=FILE</b></dt>
<dd>

<p>Use the given SXP formatted configuration script. SXP is the underlying configuration format used by Xen. SXP configuration scripts can be hand-written or generated from Python configuration scripts, using the -n (dryrun) option to print the configuration. An SXP formatted configuration file may also be generated for a given <i>domain-id</i> by redirecting the output from the the <b>xm list --long <i>domain-id</i></b> to a file.</p>

</dd>
<dt id="n---dryrun1"><b>-n</b>, <b>--dryrun</b></dt>
<dd>

<p>Dry run - prints the resulting configuration in SXP but does not create the domain.</p>

</dd>
<dt id="x---xmldryrun1"><b>-x</b>, <b>--xmldryrun</b></dt>
<dd>

<p>XML dry run - prints the resulting configuration in XML but does not create the domain.</p>

</dd>
<dt id="s---skipdtd1"><b>-s</b>, <b>--skipdtd</b></dt>
<dd>

<p>Skip DTD checking - skips checks on XML before creating. Experimental. Can decrease create time.</p>

</dd>
<dt id="p---paused2"><b>-p</b>, <b>--paused</b></dt>
<dd>

<p>Leave the domain paused after it is created.</p>

</dd>
<dt id="c---console_autoconnect1"><b>-c</b>, <b>--console_autoconnect</b></dt>
<dd>

<p>Attach console to the domain as soon as it has started. This is useful for determining issues with crashing domains.</p>

</dd>
</dl>

</dd>
<dt id="pause-domain-id"><b>pause</b> <i>domain-id</i></dt>
<dd>

<p>Pause a domain. When in a paused state the domain will still consume allocated resources such as memory, but will not be eligible for scheduling by the Xen hypervisor.</p>

</dd>
<dt id="reboot-OPTIONS-domain-id"><b>reboot</b> [<i>OPTIONS</i>] <i>domain-id</i></dt>
<dd>

<p>Reboot a domain. This acts just as if the domain had the <b>reboot</b> command run from the console. The command returns as soon as it has executed the reboot action, which may be significantly before the domain actually reboots.</p>

<p>The behavior of what happens to a domain when it reboots is set by the <b>on_reboot</b> parameter of the xmdomain.cfg file when the domain was created.</p>

<p><b>OPTIONS</b></p>

<dl>

<dt id="a---all"><b>-a</b>, <b>--all</b></dt>
<dd>

<p>Reboot all domains.</p>

</dd>
<dt id="w---wait"><b>-w</b>, <b>--wait</b></dt>
<dd>

<p>Wait for reboot to complete before returning. This may take a while, as all services in the domain will have to be shut down cleanly.</p>

</dd>
</dl>

</dd>
<dt id="restore-state-file"><b>restore</b> <i>state-file</i></dt>
<dd>

<p>Build a domain from an <b>xm save</b> state file. See <b>save</b> for more info.</p>

</dd>
<dt id="resume-domain-name-OPTIONS"><b>resume</b> <i>domain-name</i> [<i>OPTIONS</i>]</dt>
<dd>

<p>Moves a domain out of the suspended state and back into memory.</p>

<p><b>OPTIONS</b></p>

<dl>

<dt id="p---paused3"><b>-p</b>, &lt;--paused&gt;</dt>
<dd>

<p>Moves a domain back into memory but leaves the domain in a paused state. The <b>xm unpause</b> subcommand may then be used to bring it out of the paused state.</p>

</dd>
</dl>

</dd>
<dt id="save-domain-id-state-file"><b>save</b> <i>domain-id</i> <i>state-file</i></dt>
<dd>

<p>Saves a running domain to a state file so that it can be restored later. Once saved, the domain will no longer be running on the system, thus the memory allocated for the domain will be free for other domains to use. <b>xm restore</b> restores from this state file.</p>

<p>This is roughly equivalent to doing a hibernate on a running computer, with all the same limitations. Open network connections may be severed upon restore, as TCP timeouts may have expired.</p>

</dd>
<dt id="shutdown-OPTIONS-domain-id"><b>shutdown</b> [<i>OPTIONS</i>] <i>domain-id</i></dt>
<dd>

<p>Gracefully shuts down a domain. This coordinates with the domain OS to perform graceful shutdown, so there is no guarantee that it will succeed, and may take a variable length of time depending on what services must be shutdown in the domain. The command returns immediately after signally the domain unless that <b>-w</b> flag is used.</p>

<p>The behavior of what happens to a domain when it reboots is set by the <b>on_shutdown</b> parameter of the xmdomain.cfg file when the domain was created.</p>

<p><b>OPTIONS</b></p>

<dl>

<dt id="a"><b>-a</b></dt>
<dd>

<p>Shutdown <b>all</b> domains. Often used when doing a complete shutdown of a Xen system.</p>

</dd>
<dt id="w"><b>-w</b></dt>
<dd>

<p>Wait for the domain to complete shutdown before returning.</p>

</dd>
</dl>

</dd>
<dt id="start-domain-name-OPTIONS"><b>start</b> <i>domain-name</i> [<i>OPTIONS</i>]</dt>
<dd>

<p>Start a Xend managed domain that was added using the <b>xm new</b> command.</p>

<p><b>OPTIONS</b></p>

<dl>

<dt id="p---paused4"><b>-p</b>, <b>--paused</b></dt>
<dd>

<p>Do not unpause domain after starting it.</p>

</dd>
<dt id="c---console_autoconnect2"><b>-c</b>, <b>--console_autoconnect</b></dt>
<dd>

<p>Connect to the console after the domain is created.</p>

</dd>
</dl>

</dd>
<dt id="suspend-domain-name"><b>suspend</b> <i>domain-name</i></dt>
<dd>

<p>Suspend a domain to a state file so that it can be later resumed using the <b>xm resume</b> subcommand. Similar to the <b>xm save</b> subcommand although the state file may not be specified.</p>

</dd>
<dt id="sysrq-domain-id-letter"><b>sysrq</b> <i>domain-id</i> <i>letter</i></dt>
<dd>

<p>Send a <i>Magic System Request</i> signal to the domain. For more information on available magic sys req operations, see sysrq.txt in your Linux Kernel sources.</p>

</dd>
<dt id="unpause-domain-id"><b>unpause</b> <i>domain-id</i></dt>
<dd>

<p>Moves a domain out of the paused state. This will allow a previously paused domain to now be eligible for scheduling by the Xen hypervisor.</p>

</dd>
<dt id="vcpu-set-domain-id-vcpu-count"><b>vcpu-set</b> <i>domain-id</i> <i>vcpu-count</i></dt>
<dd>

<p>Enables the <i>vcpu-count</i> virtual CPUs for the domain in question. Like mem-set, this command can only allocate up to the maximum virtual CPU count configured at boot for the domain.</p>

<p>If the <i>vcpu-count</i> is smaller than the current number of active VCPUs, the highest number VCPUs will be hotplug removed. This may be important for pinning purposes.</p>

<p>Attempting to set the VCPUs to a number larger than the initially configured VCPU count is an error. Trying to set VCPUs to &lt; 1 will be quietly ignored.</p>

<p>Because this operation requires cooperation from the domain operating system, there is no guarantee that it will succeed. This command will not work with a full virt domain.</p>

</dd>
<dt id="vcpu-list-domain-id"><b>vcpu-list</b> [<i>domain-id</i>]</dt>
<dd>

<p>Lists VCPU information for a specific domain. If no domain is specified, VCPU information for all domains will be provided.</p>

</dd>
<dt id="vcpu-pin-domain-id-vcpu-cpus"><b>vcpu-pin</b> <i>domain-id</i> <i>vcpu</i> <i>cpus</i></dt>
<dd>

<p>Pins the the VCPU to only run on the specific CPUs. The keyword <b>all</b> can be used to apply the <i>cpus</i> list to all VCPUs in the domain.</p>

<p>Normally VCPUs can float between available CPUs whenever Xen deems a different run state is appropriate. Pinning can be used to restrict this, by ensuring certain VCPUs can only run on certain physical CPUs.</p>

</dd>
</dl>

<h1 id="XEN-HOST-SUBCOMMANDS">XEN HOST SUBCOMMANDS</h1>

<dl>

<dt id="dmesg--c"><b>dmesg</b> [<b>-c</b>]</dt>
<dd>

<p>Reads the Xen message buffer, similar to dmesg on a Linux system. The buffer contains informational, warning, and error messages created during Xen&#39;s boot process. If you are having problems with Xen, this is one of the first places to look as part of problem determination.</p>

<p><b>OPTIONS</b></p>

<dl>

<dt id="c---clear"><b>-c</b>, <b>--clear</b></dt>
<dd>

<p>Clears Xen&#39;s message buffer.</p>

</dd>
</dl>

</dd>
<dt id="info"><b>info</b></dt>
<dd>

<p>Print information about the Xen host in <i>name : value</i> format. When reporting a Xen bug, please provide this information as part of the bug report.</p>

<p>Sample output looks as follows (lines wrapped manually to make the man page more readable):</p>

<pre><code> host                   : talon
 release                : 2.6.12.6-xen0
 version                : #1 Mon Nov 14 14:26:26 EST 2005
 machine                : i686
 nr_cpus                : 2
 nr_nodes               : 1
 cores_per_socket       : 1
 threads_per_core       : 1
 cpu_mhz                : 696
 hw_caps                : 0383fbff:00000000:00000000:00000040
 total_memory           : 767
 free_memory            : 37
 xen_major              : 3
 xen_minor              : 0
 xen_extra              : -devel
 xen_caps               : xen-3.0-x86_32
 xen_scheduler          : credit
 xen_pagesize           : 4096
 platform_params        : virt_start=0xfc000000
 xen_changeset          : Mon Nov 14 18:13:38 2005 +0100 
                          7793:090e44133d40
 cc_compiler            : gcc version 3.4.3 (Mandrakelinux 
                          10.2 3.4.3-7mdk)
 cc_compile_by          : sdague
 cc_compile_domain      : (none)
 cc_compile_date        : Mon Nov 14 14:16:48 EST 2005
 xend_config_format     : 3</code></pre>

<p><b>FIELDS</b></p>

<p>Not all fields will be explained here, but some of the less obvious ones deserve explanation:</p>

<dl>

<dt id="hw_caps"><b>hw_caps</b></dt>
<dd>

<p>A vector showing what hardware capabilities are supported by your processor. This is equivalent to, though more cryptic, the flags field in /proc/cpuinfo on a normal Linux machine.</p>

</dd>
<dt id="free_memory"><b>free_memory</b></dt>
<dd>

<p>Available memory (in MB) not allocated to Xen, or any other domains.</p>

</dd>
<dt id="xen_caps"><b>xen_caps</b></dt>
<dd>

<p>The Xen version and architecture. Architecture values can be one of: x86_32, x86_32p (i.e. PAE enabled), x86_64, ia64.</p>

</dd>
<dt id="xen_changeset"><b>xen_changeset</b></dt>
<dd>

<p>The Xen mercurial changeset id. Very useful for determining exactly what version of code your Xen system was built from.</p>

</dd>
</dl>

</dd>
<dt id="log"><b>log</b></dt>
<dd>

<p>Print out the xend log. This log file can be found in /var/log/xend.log.</p>

</dd>
<dt id="top"><b>top</b></dt>
<dd>

<p>Executes the <b>xentop</b> command, which provides real time monitoring of domains. Xentop is a curses interface, and reasonably self explanatory.</p>

</dd>
<dt id="uptime"><b>uptime</b></dt>
<dd>

<p>Prints the current uptime of the domains running.</p>

</dd>
</dl>

<h1 id="SCHEDULER-SUBCOMMANDS">SCHEDULER SUBCOMMANDS</h1>

<p>Xen ships with a number of domain schedulers, which can be set at boot time with the <b>sched=</b> parameter on the Xen command line. By default <b>credit</b> is used for scheduling.</p>

<p>FIXME: we really need a scheduler expert to write up this section.</p>

<dl>

<dt id="sched-credit--d-domain-id--w-WEIGHT--c-CAP"><b>sched-credit</b> [ <b>-d</b> <i>domain-id</i> [ <b>-w</b>[<b>=</b><i>WEIGHT</i>] | <b>-c</b>[<b>=</b><i>CAP</i>] ] ]</dt>
<dd>

<p>Set credit scheduler parameters. The credit scheduler is a proportional fair share CPU scheduler built from the ground up to be work conserving on SMP hosts.</p>

<p>Each domain (including Domain0) is assigned a weight and a cap.</p>

<p><b>PARAMETERS</b></p>

<dl>

<dt id="WEIGHT"><i>WEIGHT</i></dt>
<dd>

<p>A domain with a weight of 512 will get twice as much CPU as a domain with a weight of 256 on a contended host. Legal weights range from 1 to 65535 and the default is 256.</p>

</dd>
<dt id="CAP"><i>CAP</i></dt>
<dd>

<p>The cap optionally fixes the maximum amount of CPU a domain will be able to consume, even if the host system has idle CPU cycles. The cap is expressed in percentage of one physical CPU: 100 is 1 physical CPU, 50 is half a CPU, 400 is 4 CPUs, etc. The default, 0, means there is no upper cap.</p>

<p>NB: Many systems have features that will scale down the computing power of a cpu that is not 100% utilized. This can be in the operating system, but can also sometimes be below the operating system in the BIOS. If you set a cap such that individual cores are running at less than 100%, this may have an impact on the performance of your workload over and above the impact of the cap. For example, if your processor runs at 2GHz, and you cap a vm at 50%, the power management system may also reduce the clock speed to 1GHz; the effect will be that your VM gets 25% of the available power (50% of 1GHz) rather than 50% (50% of 2GHz). If you are not getting the performance you expect, look at performance and cpufreq options in your operating system and your BIOS.</p>

</dd>
</dl>

</dd>
<dt id="sched-sedf-period-slice-latency-hint-extratime-weight"><b>sched-sedf</b> <i>period</i> <i>slice</i> <i>latency-hint</i> <i>extratime</i> <i>weight</i></dt>
<dd>

<p>Set Simple EDF (Earliest Deadline First) scheduler parameters. This scheduler provides weighted CPU sharing in an intuitive way and uses realtime-algorithms to ensure time guarantees. For more information see docs/misc/sedf_scheduler_mini-HOWTO.txt in the Xen distribution.</p>

<p><b>PARAMETERS</b></p>

<dl>

<dt id="period"><i>period</i></dt>
<dd>

<p>The normal EDF scheduling usage in nanoseconds</p>

</dd>
<dt id="slice"><i>slice</i></dt>
<dd>

<p>The normal EDF scheduling usage in nanoseconds</p>

<p>FIXME: these are lame, should explain more.</p>

</dd>
<dt id="latency-hint"><i>latency-hint</i></dt>
<dd>

<p>Scaled period if domain is doing heavy I/O.</p>

</dd>
<dt id="extratime"><i>extratime</i></dt>
<dd>

<p>Flag for allowing domain to run in extra time.</p>

</dd>
<dt id="weight"><i>weight</i></dt>
<dd>

<p>Another way of setting CPU slice.</p>

</dd>
</dl>

<p><b>EXAMPLES</b></p>

<p><i>normal EDF (20ms/5ms):</i></p>

<pre><code>    xm sched-sedf &lt;dom-id&gt; 20000000 5000000 0 0 0</code></pre>

<p><i>best-effort domains (i.e. non-realtime):</i></p>

<pre><code>    xm sched-sedf &lt;dom-id&gt; 20000000 0 0 1 0</code></pre>

<p><i>normal EDF (20ms/5ms) + share of extra-time:</i></p>

<pre><code>    xm sched-sedf &lt;dom-id&gt; 20000000 5000000 0 1 0</code></pre>

<p><i>4 domains with weights 2:3:4:2</i></p>

<pre><code>    xm sched-sedf &lt;d1&gt; 0 0 0 0 2
    xm sched-sedf &lt;d2&gt; 0 0 0 0 3
    xm sched-sedf &lt;d3&gt; 0 0 0 0 4
    xm sched-sedf &lt;d4&gt; 0 0 0 0 2
  </code></pre>

<p><i>1 fully-specified (10ms/3ms) domain, 3 other domains share available rest in 2:7:3 ratio:</i></p>

<pre><code>    xm sched-sedf &lt;d1&gt; 10000000 3000000 0 0 0
    xm sched-sedf &lt;d2&gt; 0 0 0 0 2
    xm sched-sedf &lt;d3&gt; 0 0 0 0 7
    xm sched-sedf &lt;d4&gt; 0 0 0 0 3</code></pre>

</dd>
</dl>

<h1 id="VIRTUAL-DEVICE-COMMANDS">VIRTUAL DEVICE COMMANDS</h1>

<p>Most virtual devices can be added and removed while guests are running. The effect to the guest OS is much the same as any hotplug event.</p>

<h2 id="BLOCK-DEVICES">BLOCK DEVICES</h2>

<dl>

<dt id="block-attach-domain-id-be-dev-fe-dev-mode-bedomain-id"><b>block-attach</b> <i>domain-id</i> <i>be-dev</i> <i>fe-dev</i> <i>mode</i> [<i>bedomain-id</i>]</dt>
<dd>

<p>Create a new virtual block device. This will trigger a hotplug event for the guest.</p>

<p><b>OPTIONS</b></p>

<dl>

<dt id="domain-id"><i>domain-id</i></dt>
<dd>

<p>The domain id of the guest domain that the device will be attached to.</p>

</dd>
<dt id="be-dev"><i>be-dev</i></dt>
<dd>

<p>The device in the backend domain (usually domain 0) to be exported. This can be specified as a physical partition (phy:sda7) or as a file mounted as loopback (file://path/to/loop.iso).</p>

</dd>
<dt id="fe-dev"><i>fe-dev</i></dt>
<dd>

<p>How the device should be presented to the guest domain. It can be specified as either a symbolic name, such as /dev/hdc, for common devices, or by device id, such as 0x1400 (/dev/hdc device id in hex).</p>

</dd>
<dt id="mode"><i>mode</i></dt>
<dd>

<p>The access mode for the device from the guest domain. Supported modes are <b>w</b> (read/write) or <b>r</b> (read-only).</p>

</dd>
<dt id="bedomain-id"><i>bedomain-id</i></dt>
<dd>

<p>The back end domain hosting the device. This defaults to domain 0.</p>

</dd>
</dl>

<p><b>EXAMPLES</b></p>

<dl>

<dt id="Mount-an-ISO-as-a-Disk"><i>Mount an ISO as a Disk</i></dt>
<dd>

<p>xm block-attach guestdomain file://path/to/dsl-2.0RC2.iso /dev/hdc r</p>

<p>This will mount the dsl ISO as /dev/hdc in the guestdomain as a read only device. This will probably not be detected as a CD-ROM by the guest, but mounting /dev/hdc manually will work.</p>

</dd>
</dl>

</dd>
<dt id="block-detach-domain-id-devid---force"><b>block-detach</b> <i>domain-id</i> <i>devid</i> [<b>--force</b>]</dt>
<dd>

<p>Detach a domain&#39;s virtual block device. <i>devid</i> may be the symbolic name or the numeric device id given to the device by domain 0. You will need to run <b>xm block-list</b> to determine that number.</p>

<p>Detaching the device requires the cooperation of the domain. If the domain fails to release the device (perhaps because the domain is hung or is still using the device), the detach will fail. The <b>--force</b> parameter will forcefully detach the device, but may cause IO errors in the domain.</p>

</dd>
<dt id="block-list--l---long-domain-id"><b>block-list</b> [<b>-l</b>|<b>--long</b>] <i>domain-id</i></dt>
<dd>

<p>List virtual block devices for a domain. The returned output is formatted as a list or as an S-Expression if the <b>--long</b> option was given.</p>

</dd>
</dl>

<h2 id="NETWORK-DEVICES">NETWORK DEVICES</h2>

<dl>

<dt id="network-attach-domain-id-script-scriptname-ip-ipaddr-mac-macaddr-bridge-bridge-name-backend-bedomain-id"><b>network-attach</b> <i>domain-id</i> [<b>script=</b><i>scriptname</i>] [<b>ip=</b><i>ipaddr</i>] [<b>mac=</b><i>macaddr</i>] [<b>bridge=</b><i>bridge-name</i>] [<b>backend=</b><i>bedomain-id</i>]</dt>
<dd>

<p>Creates a new network device in the domain specified by <i>domain-id</i>. It takes the following optional options:</p>

</dd>
</dl>

<p><b>OPTIONS</b></p>

<dl>

<dt id="script-scriptname"><b>script=</b><i>scriptname</i></dt>
<dd>

<p>Use the specified script name to bring up the network. Defaults to the default setting in xend-config.sxp for <b>vif-script</b>.</p>

</dd>
<dt id="ip-ipaddr"><b>ip=</b><i>ipaddr</i></dt>
<dd>

<p>Passes the specified IP Address to the adapter on creation.</p>

<p>FIXME: this currently appears to be <b>broken</b>. I&#39;m not sure under what circumstances this should actually work.</p>

</dd>
<dt id="mac-macaddr"><b>mac=</b><i>macaddr</i></dt>
<dd>

<p>The MAC address that the domain will see on its Ethernet device. If the device is not specified it will be randomly generated with the 00:16:3e vendor id prefix.</p>

</dd>
<dt id="bridge-bridge-name"><b>bridge=</b><i>bridge-name</i></dt>
<dd>

<p>The name of the bridge to attach the vif to, in case you have more than one. This defaults to xenbr0.</p>

</dd>
<dt id="backend-bedomain-id"><b>backend=</b><i>bedomain-id</i></dt>
<dd>

<p>The backend domain id. By default this is domain 0.</p>

</dd>
</dl>

<dl>

<dt id="network-detach-domain-id-devid"><b>network-detach</b> <i>domain-id</i> <i>devid</i></dt>
<dd>

<p>Removes the network device from the domain specified by <i>domain-id</i>. <i>devid</i> is the virtual interface device number within the domain (i.e. the 3 in vif22.3).</p>

<p>FIXME: this is currently <b>broken</b>. Network devices aren&#39;t completely removed from domain 0.</p>

</dd>
<dt id="network-list--l---long-domain-id"><b>network-list</b> [<b>-l</b>|<b>--long</b>]&gt; <i>domain-id</i></dt>
<dd>

<p>List virtual network interfaces for a domain. The returned output is formatted as a list or as an S-Expression if the <b>--long</b> option was given.</p>

</dd>
</dl>

<h1 id="SEE-ALSO">SEE ALSO</h1>

<p><b>xmdomain.cfg</b>(5), <b>xentop</b>(1)</p>

<h1 id="AUTHOR">AUTHOR</h1>

<pre><code>  Sean Dague &lt;sean at dague dot net&gt;
  Daniel Stekloff &lt;dsteklof at us dot ibm dot com&gt;
  Reiner Sailer &lt;sailer at us dot ibm dot com&gt;
  Stefan Berger &lt;stefanb at us dot ibm dot com&gt;</code></pre>

<h1 id="BUGS">BUGS</h1>


</body>

</html>


